const e="undefined"!=typeof WebAssembly?WebAssembly:"undefined"!=typeof WXWebAssembly?WXWebAssembly:void 0;function r(e){if(e&&"object"!=typeof e)throw new TypeError("imports must be an object or undefined")}function t(n,a){if(!n)throw new TypeError("Invalid wasm source");r(a),a=null!=a?a:{};try{const e=n.then;if("function"==typeof e)return e.call(n,(e=>t(e,a)))}catch(e){}if(n instanceof ArrayBuffer||ArrayBuffer.isView(n))return e.instantiate(n,a);if(n instanceof e.Module)return e.instantiate(n,a).then((e=>({instance:e,module:n})));if("undefined"!=typeof Response&&n instanceof Response)return n.arrayBuffer().then((r=>e.instantiate(r,a)));const o="string"==typeof n;if(o||"undefined"!=typeof URL&&n instanceof URL){if(o&&"undefined"!=typeof wx&&"undefined"!=typeof __wxConfig)return e.instantiate(n,a);if("function"!=typeof fetch)throw new TypeError("wasm source can not be a string or URL in this environment");if("function"!=typeof e.instantiateStreaming)return t(fetch(n),a);try{return e.instantiateStreaming(fetch(n),a).catch((()=>t(fetch(n),a)))}catch(e){return t(fetch(n),a)}}throw new TypeError("Invalid wasm source")}function n(r){var t=function(){var t,n,a,o,s,i,u="object"==typeof process&&null!==process&&"object"==typeof process.versions&&null!==process.versions&&"string"==typeof process.versions.node,c=Boolean(r.childThread),f=Boolean(r.reuseWorker);function l(r){if("function"==typeof e.RuntimeError)throw new e.RuntimeError(r);throw Error(r)}var d,p,v,g,y={imports:{env:{},napi:{},emnapi:{}},exports:{},emnapi:{},loaded:!1,filename:"",childThread:Boolean(r.childThread),spawnThread:void 0,startThread:void 0,initWorker:void 0,executeAsyncWork:void 0,init:function(r){if(y.loaded)return y.exports;if(!r)throw new TypeError("Invalid napi init options");var u=r.instance;if(!(null==u?void 0:u.exports))throw new TypeError("Invalid wasm instance");t=u;var c=u.exports,f=r.module,v=r.memory||c.memory,g=r.table||c.__indirect_function_table;if(!(f instanceof e.Module))throw new TypeError("Invalid wasm module");if(!(v instanceof e.Memory))throw new TypeError("Invalid wasm memory");if(!(g instanceof e.Table))throw new TypeError("Invalid wasm table");if(n=f,a=v,o=g,"function"!=typeof c.malloc)throw new TypeError("malloc is not exported");if("function"!=typeof c.free)throw new TypeError("free is not exported");if(s=c.malloc,i=c.free,!y.childThread){var h=8,E=u.exports.node_api_module_get_api_version_v1;"function"==typeof E&&(h=E());var _=y.envObject||(y.envObject=d.createEnv(y.filename,h,(function(e){return o.get(e)}),(function(e){return o.get(e)}),l,p)),w=d.openScope(_);try{_.callIntoModule((function(e){var r=y.exports,t=w.add(r),n=(0,u.exports.napi_register_wasm_v1)(e.id,t.id);y.exports=n?d.handleStore.get(n).value:r}))}finally{d.closeScope(_,w)}return y.loaded=!0,delete y.envObject,y.exports}}};if(c){d=null==r?void 0:r.context;var h="function"==typeof r.postMessage?r.postMessage:"function"==typeof postMessage?postMessage:void 0;if("function"!=typeof h)throw new TypeError("No postMessage found");y.postMessage=h}else{var E=r.context;if("object"!=typeof E||null===E)throw new TypeError("Invalid `options.context`. Use `import { getDefaultContext } from '@emnapi/runtime'`");d=E}if("string"==typeof r.filename&&(y.filename=r.filename),"function"==typeof r.onCreateWorker&&(v=r.onCreateWorker),"function"==typeof r.print?r.print:console.log.bind(console),g="function"==typeof r.printErr?r.printErr:console.warn.bind(console),"nodeBinding"in r){var _=r.nodeBinding;if("object"!=typeof _||null===_)throw new TypeError("Invalid `options.nodeBinding`. Use @emnapi/node-binding package");p=_}var w=0;if("asyncWorkPoolSize"in r){if("number"!=typeof r.asyncWorkPoolSize)throw new TypeError("options.asyncWorkPoolSize must be a integer");(w=r.asyncWorkPoolSize>>0)>1024?w=1024:w<-1024&&(w=-1024)}var L=!c&&w<=0;function m(){return Math.abs(w)}function b(e){if(!e)return!1;if(e._emnapiSendListener)return!0;var r=function(e){var r=(u?e:e.data).__emnapi__;if(r&&"async-send"===r.type)if(c){(0,y.postMessage)({__emnapi__:r})}else{var t=r.payload.callback;o.get(t)(r.payload.data)}};return e._emnapiSendListener={handler:r,dispose:function(){u?e.off("message",r):e.removeEventListener("message",r,!1),delete e._emnapiSendListener}},u?e.on("message",r):e.addEventListener("message",r,!1),!0}function S(e,r){var t=void 0!==r;if(!t&&!(r=s(8)))return-48;var n,o=new Int32Array(a.buffer,r,2);if(Atomics.store(o,0,0),Atomics.store(o,1,0),c){(0,y.postMessage)({__emnapi__:{type:"spawn-thread",payload:{startArg:e,errorOrTid:r}}}),Atomics.wait(o,1,0);var f=Atomics.load(o,0),l=Atomics.load(o,1);return t?f:(i(r),f?-l:l)}try{if(!(n=C.getNewWorker()))throw new Error("failed to get new worker")}catch(e){return Atomics.store(o,0,1),Atomics.store(o,1,6),Atomics.notify(o,1),g(e.message),t?1:(i(r),-6)}var d=C.nextWorkerID+43;Atomics.store(o,0,0),Atomics.store(o,1,d),Atomics.notify(o,1);return C.nextWorkerID=(C.nextWorkerID+1)%536870869,C.pthreads[d]=n,n.__emnapi_tid=d,C.runningWorkers.push(n),u&&n.ref(),n.postMessage({__emnapi__:{type:"start",payload:{tid:d,arg:e}}}),t?0:(i(r),d)}y.imports.env._emnapi_async_work_pool_size=m,y.emnapi.addSendListener=b,y.spawnThread=S,y.startThread=function(e,r){if(!y.childThread)throw new Error("startThread is only available in child threads");if("function"!=typeof t.exports.wasi_thread_start)throw new TypeError("wasi_thread_start is not exported");var n=y.postMessage;t.exports.wasi_thread_start(e,r),n({__emnapi__:{type:"cleanup-thread",payload:{tid:e}}})};var C={unusedWorkers:[],runningWorkers:[],pthreads:Object.create(null),nextWorkerID:0,init:function(){},returnWorkerToPool:function(e){var r=e.__emnapi_tid;delete C.pthreads[r],C.unusedWorkers.push(e),C.runningWorkers.splice(C.runningWorkers.indexOf(e),1),delete e.__emnapi_tid,u&&e.unref()},loadWasmModuleToWorker:function(e){return e.whenLoaded||(e.whenLoaded=new Promise((function(r,t){e.onmessage=function(t){if(t.data.__emnapi__){var n=t.data.__emnapi__.type,a=t.data.__emnapi__.payload;"loaded"===n?(e.loaded=!0,u&&!e.__emnapi_tid&&e.unref(),r(e)):"spawn-thread"===n?S(a.startArg,a.errorOrTid):"cleanup-thread"===n&&(f?C.returnWorkerToPool(e):(delete C.pthreads[a.tid],C.runningWorkers.splice(C.runningWorkers.indexOf(e),1),function(e){var r=e.__emnapi_tid;e.terminate(),e.onmessage=function(e){e.data.__emnapi__&&g('received "'+e.data.__emnapi__.type+'" command from terminated worker: '+r)}}(e),delete e.__emnapi_tid))}},e.onerror=function(e){throw g("worker sent an error! "+e.message),t(e),e},u&&(e.on("message",(function(r){e.onmessage({data:r})})),e.on("error",(function(r){e.onerror(r)})),e.on("detachedExit",(function(){}))),b(e);try{e.postMessage({__emnapi__:{type:"load",payload:{wasmModule:n,wasmMemory:a}}})}catch(e){if("undefined"==typeof SharedArrayBuffer||!(a.buffer instanceof SharedArrayBuffer))throw new Error("Multithread features require shared wasm memory. Try to compile with `-matomics -mbulk-memory` and use `--import-memory --shared-memory` during linking");throw e}}))),e.whenLoaded},allocateUnusedWorker:function(){if("function"!=typeof v)throw new TypeError("`options.onCreateWorker` is not provided");var e=v({type:"thread"});return C.unusedWorkers.push(e),e},getNewWorker:function(){if(f){if(0===C.unusedWorkers.length){var e=C.allocateUnusedWorker();C.loadWasmModuleToWorker(e)}return C.unusedWorkers.pop()}var r=C.allocateUnusedWorker();return C.loadWasmModuleToWorker(r),r}};function I(e,r){d.feature.setImmediate((function(){o.get(e)(r)}))}function A(e,r){Promise.resolve().then((function(){o.get(e)(r)}))}function k(e,r){var t,n=[r>>>0,(t=r,+Math.abs(t)>=1?t>0?(0|Math.min(+Math.floor(t/4294967296),4294967295))>>>0:~~+Math.ceil((t-+(~~t>>>0))/4294967296)>>>0:0)],o=new DataView(a.buffer);o.setInt32(e,n[0],!0),o.setInt32(e+4,n[1],!0)}var V,T=Object.freeze({__proto__:null,$emnapiSetValueI64:k,_emnapi_call_finalizer:function(e,r,t,n,a){d.envStore.get(r).callFinalizerInternal(e,t,n,a)},_emnapi_callback_into_module:function(e,r,t,n,a){var s=d.envStore.get(r),i=d.openScope(s);try{s.callbackIntoModule(Boolean(e),(function(){o.get(t)(r,n)}))}catch(e){throw d.closeScope(s,i),a&&d.closeScope(s),e}d.closeScope(s,i)},_emnapi_ctx_decrease_waiting_request_counter:function(){d.decreaseWaitingRequestCounter()},_emnapi_ctx_increase_waiting_request_counter:function(){d.increaseWaitingRequestCounter()},_emnapi_get_node_version:function(e,r,t){var n="object"==typeof process&&null!==process&&"object"==typeof process.versions&&null!==process.versions&&"string"==typeof process.versions.node?process.versions.node.split(".").map((function(e){return Number(e)})):[0,0,0],o=new DataView(a.buffer);o.setUint32(e,n[0],!0),o.setUint32(r,n[1],!0),o.setUint32(t,n[2],!0)},_emnapi_next_tick:A,_emnapi_runtime_keepalive_pop:function(){},_emnapi_runtime_keepalive_push:function(){},_emnapi_set_immediate:I,napi_clear_last_error:function(e){return d.envStore.get(e).clearLastError()},napi_set_last_error:function(e,r,t,n){return d.envStore.get(e).setLastError(r,t,n)}});function D(e){var r=new DataView(a.buffer).getInt32(e+20,!0);return C.pthreads[r]}var B=new Promise((function(e){V=function(){B.ready=!0,e()}}));B.ready=!1;var x=Object.freeze({__proto__:null,_emnapi_after_uvthreadpool_ready:function(e,r,t){B.ready?o.get(e)(r,t):B.then((function(){o.get(e)(r,t)}))},_emnapi_async_send_js:function(e,r,t){if(c)(0,y.postMessage)({__emnapi__:{type:"async-send",payload:{callback:r,data:t}}});else switch(e){case 0:I(r,t);break;case 1:A(r,t)}},_emnapi_emit_async_thread_ready:function(){c&&(0,y.postMessage)({__emnapi__:{type:"async-thread-ready",payload:{}}})},_emnapi_is_main_browser_thread:function(){return"undefined"==typeof window||"undefined"==typeof document||u?0:1},_emnapi_tell_js_uvthreadpool:function(e,r){for(var t=[],n=new DataView(a.buffer),o=function(r){var a=D(n.getInt32(e+4*r,!0));t.push(new Promise((function(e){var r=function(t){var n=(u?t:t.data).__emnapi__;n&&"async-thread-ready"===n.type&&(e(),a&&"function"==typeof a.unref&&a.unref(),u?a.off("message",r):a.removeEventListener("message",r))};u?a.on("message",r):a.addEventListener("message",r)})))},s=0;s<r;s++)o(s);Promise.all(t).then(V)},_emnapi_worker_unref:function(e){if(!c){var r=D(e);r&&"function"==typeof r.unref&&r.unref()}}});var U=Object.freeze({__proto__:null,napi_adjust_external_memory:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);if(!t)return n.setLastError(1);var o=Number(r);if(o<0)return n.setLastError(1);var s=a.buffer.byteLength,i=s+o;return i+=(65536-i%65536)%65536,-1===a.grow(i-s+65535>>16)?n.setLastError(9):(d.feature.supportBigInt?new DataView(a.buffer).setBigInt64(t,BigInt(a.buffer.byteLength),!0):k(t,a.buffer.byteLength),n.clearLastError())}}),R={idGen:{},values:[void 0],queued:new Set,pending:[],init:function(){var e={nextId:1,list:[],generate:function(){var r;return e.list.length?r=e.list.shift():(r=e.nextId,e.nextId++),r},reuse:function(r){e.list.push(r)}};R.idGen=e,R.values=[void 0],R.queued=new Set,R.pending=[]},create:function(e,r,t,n,a,o){var s=0,i=0;if(p){var u=p.node.emitAsyncInit(r,t,-1);s=u.asyncId,i=u.triggerAsyncId}var c=R.idGen.generate();return R.values[c]={env:e,id:c,resource:r,asyncId:s,triggerAsyncId:i,status:0,execute:n,complete:a,data:o},c},callComplete:function(e,r){var t=e.complete,n=e.env,a=e.data,s=function(){if(t){var e=d.envStore.get(n),s=d.openScope(e);try{e.callbackIntoModule(!0,(function(){o.get(t)(n,r,a)}))}finally{d.closeScope(e,s)}}};p?p.node.makeCallback(e.resource,s,[],{asyncId:e.asyncId,triggerAsyncId:e.triggerAsyncId}):s()},queue:function(e){var r=R.values[e];if(r&&0===r.status){if(r.status=1,R.queued.size>=(Math.abs(w)||4))return void R.pending.push(e);R.queued.add(e);var t=r.env,n=r.data,a=r.execute;r.status=2,d.feature.setImmediate((function(){if(o.get(a)(t,n),R.queued.delete(e),r.status=3,d.feature.setImmediate((function(){R.callComplete(r,0)})),R.pending.length>0){var s=R.pending.shift();R.values[s].status=0,R.queue(s)}}))}},cancel:function(e){var r=R.pending.indexOf(e);if(-1!==r){var t=R.values[e];return t&&1===t.status?(t.status=4,R.pending.splice(r,1),d.feature.setImmediate((function(){R.callComplete(t,11)})),0):9}return 9},remove:function(e){var r=R.values[e];r&&(p&&p.node.emitAsyncDestroy({asyncId:r.asyncId,triggerAsyncId:r.triggerAsyncId}),R.values[e]=void 0,R.idGen.reuse(e))}};function G(e,r,t,n){if(p){var o=d.handleStore.get(e).value,s=d.handleStore.get(r).value,i=p.node.emitAsyncInit(o,s,t),u=i.asyncId,c=i.triggerAsyncId;if(n){var f=new DataView(a.buffer);f.setFloat64(n,u,!0),f.setFloat64(n+8,c,!0)}}}function j(e,r){p&&p.node.emitAsyncDestroy({asyncId:e,triggerAsyncId:r})}var O=Object.freeze({__proto__:null,_emnapi_async_destroy_js:function(e){if(!p)return 9;var r=new DataView(a.buffer),t=r.getInt32(e,!0),n=r.getInt32(e+4,!0),o=BigInt(t>>>0)|BigInt(n)<<BigInt(32),s=p.napi.asyncDestroy(o);return 0!==s.status?s.status:0},_emnapi_async_init_js:function(e,r,t){if(!p)return 9;var n;e&&(n=Object(d.handleStore.get(e).value));var o=d.handleStore.get(r).value,s=p.napi.asyncInit(n,o);if(0!==s.status)return s.status;var i=s.value;i>=BigInt(-1)*(BigInt(1)<<BigInt(63))&&i<BigInt(1)<<BigInt(63)||(i&=(BigInt(1)<<BigInt(64))-BigInt(1))>=BigInt(1)<<BigInt(63)&&(i-=BigInt(1)<<BigInt(64));var u=Number(i&BigInt(4294967295)),c=Number(i>>BigInt(32)),f=new DataView(a.buffer);return f.setInt32(t,u,!0),f.setInt32(t+4,c,!0),0},_emnapi_env_check_gc_access:function(e){d.envStore.get(e).checkGCAccess()},_emnapi_node_emit_async_destroy:j,_emnapi_node_emit_async_init:G,_emnapi_node_make_callback:function(e,r,t,n,o,s,i,u){var c,f=0;if(p){var l=d.handleStore.get(r).value,v=d.handleStore.get(t).value;o>>>=0;for(var g=Array(o),y=new DataView(a.buffer);f<o;f++){var h=y.getInt32(n+4*f,!0);g[f]=d.handleStore.get(h).value}var E=p.node.makeCallback(l,v,g,{asyncId:s,triggerAsyncId:i});if(u)c=d.envStore.get(e).ensureHandleId(E),y.setInt32(u,c,!0)}},napi_close_callback_scope:function(e,r){throw new Error("napi_close_callback_scope has not been implemented yet")},napi_make_callback:function(e,r,t,n,o,s,i){var u,c=0;if(!e)return 1;var f=d.envStore.get(e);if(f.checkGCAccess(),!f.tryCatch.isEmpty())return f.setLastError(10);if(!f.canCallIntoJs())return f.setLastError(2147483647===f.moduleApiVersion?23:10);f.clearLastError();try{if(!p)return f.setLastError(9);if(!t)return f.setLastError(1);if(o>0&&!s)return f.setLastError(1);var l=Object(d.handleStore.get(t).value),v=d.handleStore.get(n).value;if("function"!=typeof v)return f.setLastError(1);var g=new DataView(a.buffer),y=g.getInt32(r,!0),h=g.getInt32(r+4,!0),E=BigInt(y>>>0)|BigInt(h)<<BigInt(32);o>>>=0;for(var _=Array(o);c<o;c++){var w=g.getInt32(s+4*c,!0);_[c]=d.handleStore.get(w).value}var L=p.napi.makeCallback(E,l,v,_);if(L.error)throw L.error;return 0!==L.status?f.setLastError(L.status):(i&&(u=f.ensureHandleId(L.value),g.setInt32(i,u,!0)),f.getReturnStatus())}catch(e){return f.tryCatch.setError(e),f.setLastError(10)}},napi_open_callback_scope:function(e,r,t,n){throw new Error("napi_open_callback_scope has not been implemented yet")}}),z={offset:{resource:0,async_id:8,trigger_async_id:16,queue_size:24,queue:28,thread_count:32,is_closing:36,dispatch_state:40,context:44,max_queue_size:48,ref:52,env:56,finalize_data:60,finalize_cb:64,call_js_cb:68,handles_closing:72,async_ref:76,mutex:80,cond:84,end:88},init:function(){if(void 0!==C){C.unusedWorkers.forEach(z.addListener),C.runningWorkers.forEach(z.addListener);var e=C.getNewWorker;C.getNewWorker=function(){var r=e.apply(this,arguments);return z.addListener(r),r}}},addListener:function(e){if(!e)return!1;if(e._emnapiTSFNListener)return!0;var r=function(e){var r=(u?e:e.data).__emnapi__;if(r){var t=r.type,n=r.payload;"tsfn-send"===t&&z.dispatch(n.tsfn)}};return e._emnapiTSFNListener={handler:r,dispose:function(){u?e.off("message",r):e.removeEventListener("message",r,!1),delete e._emnapiTSFNListener}},u?e.on("message",r):e.addEventListener("message",r,!1),!0},initQueue:function(e){var r=s(8);return!!r&&(new Uint8Array(a.buffer,r,8).fill(0),z.storeSizeTypeValue(e+z.offset.queue,r,!1),!0)},destroyQueue:function(e){var r=z.loadSizeTypeValue(e+z.offset.queue,!1);r&&i(r)},pushQueue:function(e,r){var t=z.loadSizeTypeValue(e+z.offset.queue,!1),n=z.loadSizeTypeValue(t,!1),a=z.loadSizeTypeValue(t+4,!1),o=s(8);if(!o)throw new Error("OOM");z.storeSizeTypeValue(o,r,!1),z.storeSizeTypeValue(o+4,0,!1),0===n&&0===a?(z.storeSizeTypeValue(t,o,!1),z.storeSizeTypeValue(t+4,o,!1)):(z.storeSizeTypeValue(a+4,o,!1),z.storeSizeTypeValue(t+4,o,!1)),z.addQueueSize(e)},shiftQueue:function(e){var r=z.loadSizeTypeValue(e+z.offset.queue,!1),t=z.loadSizeTypeValue(r,!1);if(0===t)return 0;var n=t,a=z.loadSizeTypeValue(t+4,!1);z.storeSizeTypeValue(r,a,!1),0===a&&z.storeSizeTypeValue(r+4,0,!1),z.storeSizeTypeValue(n+4,0,!1);var o=z.loadSizeTypeValue(n,!1);return i(n),z.subQueueSize(e),o},push:function(e,r,t){var n=z.getMutex(e),a=z.getCond(e),o="undefined"!=typeof window&&"undefined"!=typeof document&&!u;return n.execute((function(){for(;n=void 0,s=void 0,i=void 0,n=z.getQueueSize(e),s=z.getMaxQueueSize(e),i=z.getIsClosing(e),n>=s&&s>0&&!i;){if(0===t)return 15;if(o)return 21;a.wait()}var n,s,i;return z.getIsClosing(e)?0===z.getThreadCount(e)?1:(z.subThreadCount(e),16):(z.pushQueue(e,r),z.send(e),0)}))},getMutex:function(e){var r=e+z.offset.mutex,t={lock:function(){var e="undefined"!=typeof window&&"undefined"!=typeof document&&!u,t=new Int32Array(a.buffer,r,1);if(e)for(;;){if(0===Atomics.compareExchange(t,0,0,1))return}else for(;;){if(0===Atomics.compareExchange(t,0,0,1))return;Atomics.wait(t,0,1)}},unlock:function(){var e=new Int32Array(a.buffer,r,1);if(1!==Atomics.compareExchange(e,0,1,0))throw new Error("Tried to unlock while not holding the mutex");Atomics.notify(e,0,1)},execute:function(e){t.lock();try{return e()}finally{t.unlock()}}};return t},getCond:function(e){var r=e+z.offset.cond,t=z.getMutex(e);return{wait:function(){var e=new Int32Array(a.buffer,r,1),n=Atomics.load(e,0);t.unlock(),Atomics.wait(e,0,n),t.lock()},signal:function(){var e=new Int32Array(a.buffer,r,1);Atomics.add(e,0,1),Atomics.notify(e,0,1)}}},getQueueSize:function(e){return z.loadSizeTypeValue(e+z.offset.queue_size,!0)},addQueueSize:function(e){var r,t,n=z.offset.queue_size;r=new Uint32Array(a.buffer),t=e+n>>2,Atomics.add(r,t,1)},subQueueSize:function(e){var r,t,n=z.offset.queue_size;r=new Uint32Array(a.buffer),t=e+n>>2,Atomics.sub(r,t,1)},getThreadCount:function(e){return z.loadSizeTypeValue(e+z.offset.thread_count,!0)},addThreadCount:function(e){var r,t,n=z.offset.thread_count;r=new Uint32Array(a.buffer),t=e+n>>2,Atomics.add(r,t,1)},subThreadCount:function(e){var r,t,n=z.offset.thread_count;r=new Uint32Array(a.buffer),t=e+n>>2,Atomics.sub(r,t,1)},getIsClosing:function(e){return Atomics.load(new Int32Array(a.buffer),e+z.offset.is_closing>>2)},setIsClosing:function(e,r){Atomics.store(new Int32Array(a.buffer),e+z.offset.is_closing>>2,r)},getHandlesClosing:function(e){return Atomics.load(new Int32Array(a.buffer),e+z.offset.handles_closing>>2)},setHandlesClosing:function(e,r){Atomics.store(new Int32Array(a.buffer),e+z.offset.handles_closing>>2,r)},getDispatchState:function(e){return Atomics.load(new Uint32Array(a.buffer),e+z.offset.dispatch_state>>2)},getContext:function(e){return z.loadSizeTypeValue(e+z.offset.context,!1)},getMaxQueueSize:function(e){return z.loadSizeTypeValue(e+z.offset.max_queue_size,!0)},getEnv:function(e){return z.loadSizeTypeValue(e+z.offset.env,!1)},getCallJSCb:function(e){return z.loadSizeTypeValue(e+z.offset.call_js_cb,!1)},getRef:function(e){return z.loadSizeTypeValue(e+z.offset.ref,!1)},getResource:function(e){return z.loadSizeTypeValue(e+z.offset.resource,!1)},getFinalizeCb:function(e){return z.loadSizeTypeValue(e+z.offset.finalize_cb,!1)},getFinalizeData:function(e){return z.loadSizeTypeValue(e+z.offset.finalize_data,!1)},loadSizeTypeValue:function(e,r){var t;return r?(t=new Uint32Array(a.buffer),Atomics.load(t,e>>2)):(t=new Int32Array(a.buffer),Atomics.load(t,e>>2))},storeSizeTypeValue:function(e,r,t){var n;return t?(n=new Uint32Array(a.buffer),void Atomics.store(n,e>>2,r)):(n=new Int32Array(a.buffer),void Atomics.store(n,e>>2,r>>>0))},destroy:function(e){z.destroyQueue(e);var r=z.getEnv(e),t=d.envStore.get(r),n=z.getRef(e);n&&d.refStore.get(n).dispose(),d.removeCleanupHook(t,z.cleanup,e),t.unref();var o=e+z.offset.async_ref>>2,s=new Int32Array(a.buffer);Atomics.load(s,o)&&(Atomics.store(s,o,0),d.decreaseWaitingRequestCounter());var u=z.getResource(e);if(d.refStore.get(u).dispose(),p){var c=new DataView(a.buffer);j(c.getFloat64(e+z.offset.async_id,!0),c.getFloat64(e+z.offset.trigger_async_id,!0))}i(e)},emptyQueueAndDelete:function(e){for(var r,t=z.getCallJSCb(e),n=z.getContext(e);z.getQueueSize(e)>0;)r=z.shiftQueue(e),t&&o.get(t)(0,0,n,r);z.destroy(e)},finalize:function(e){var r=z.getEnv(e),t=d.envStore.get(r);d.openScope(t);var n=z.getFinalizeCb(e),o=z.getFinalizeData(e),s=z.getContext(e),i=function(){t.callFinalizerInternal(0,n,o,s)};try{if(n)if(p){var u=z.getResource(e),c=d.refStore.get(u).get(),f=d.handleStore.get(c).value,l=new DataView(a.buffer),v=l.getFloat64(e+z.offset.async_id,!0),g=l.getFloat64(e+z.offset.trigger_async_id,!0);p.node.makeCallback(f,i,[],{asyncId:v,triggerAsyncId:g})}else i();z.emptyQueueAndDelete(e)}finally{d.closeScope(t)}},cleanup:function(e){z.closeHandlesAndMaybeDelete(e,1)},closeHandlesAndMaybeDelete:function(e,r){var t=z.getEnv(e),n=d.envStore.get(t);d.openScope(n);try{if(r&&z.getMutex(e).execute((function(){z.setIsClosing(e,1),z.getMaxQueueSize(e)>0&&z.getCond(e).signal()})),z.getHandlesClosing(e))return;z.setHandlesClosing(e,1),d.feature.setImmediate((function(){z.finalize(e)}))}finally{d.closeScope(n)}},dispatchOne:function(e){var r=0,t=!1,n=!1,s=z.getMutex(e),i=z.getCond(e);if(s.execute((function(){if(z.getIsClosing(e))z.closeHandlesAndMaybeDelete(e,0);else{var a=z.getQueueSize(e);if(a>0){r=z.shiftQueue(e),t=!0;var o=z.getMaxQueueSize(e);a===o&&o>0&&i.signal(),a--}0===a?0===z.getThreadCount(e)&&(z.setIsClosing(e,1),z.getMaxQueueSize(e)>0&&i.signal(),z.closeHandlesAndMaybeDelete(e,0)):n=!0}})),t){var u=z.getEnv(e),c=d.envStore.get(u);d.openScope(c);var f=function(){c.callbackIntoModule(!1,(function(){var t=z.getCallJSCb(e),n=z.getRef(e),a=n?d.refStore.get(n).get():0;if(t){var s=z.getContext(e);o.get(t)(u,a,s,r)}else{var i=a?d.handleStore.get(a).value:null;"function"==typeof i&&i()}}))};try{if(p){var l=z.getResource(e),v=d.refStore.get(l).get(),g=d.handleStore.get(v).value,y=new DataView(a.buffer);p.node.makeCallback(g,f,[],{asyncId:y.getFloat64(e+z.offset.async_id,!0),triggerAsyncId:y.getFloat64(e+z.offset.trigger_async_id,!0)})}else f()}finally{d.closeScope(c)}}return n},dispatch:function(e){for(var r=!0,t=1e3,n=new Uint32Array(a.buffer),o=e+z.offset.dispatch_state>>2;r&&0!=--t;)Atomics.store(n,o,1),r=z.dispatchOne(e),1!==Atomics.exchange(n,o,0)&&(r=!0);r&&z.send(e)},send:function(e){1!=(1&Atomics.or(new Uint32Array(a.buffer),e+z.offset.dispatch_state>>2,2))&&(void 0!==c&&c?postMessage({__emnapi__:{type:"tsfn-send",payload:{tsfn:e}}}):d.feature.setImmediate((function(){z.dispatch(e)})))}};var M={unusedWorkers:[],runningWorkers:[],workQueue:[],workerReady:null,offset:{resource:0,async_id:8,trigger_async_id:16,env:24,data:28,execute:32,complete:36,end:40},init:function(){M.unusedWorkers=[],M.runningWorkers=[],M.workQueue=[],M.workerReady=null},addListener:function(e){if(!e)return!1;if(e._emnapiAWMTListener)return!0;var r=function(r){var t=(u?r:r.data).__emnapi__;if(t){var n=t.type,a=t.payload;"async-work-complete"===n?(d.decreaseWaitingRequestCounter(),M.runningWorkers.splice(M.runningWorkers.indexOf(e),1),M.unusedWorkers.push(e),M.checkIdleWorker(),M.callComplete(a.work,0)):"async-work-queue"===n?M.scheduleWork(a.work):"async-work-cancel"===n&&M.cancelWork(a.work)}};return e._emnapiAWMTListener={handler:r,dispose:function(){u?e.off("message",r):e.removeEventListener("message",r,!1),delete e._emnapiAWMTListener}},u?e.on("message",r):e.addEventListener("message",r,!1),!0},initWorkers:function(e){if(c)return M.workerReady||(M.workerReady=Promise.resolve());if(M.workerReady)return M.workerReady;if("function"!=typeof v)throw new TypeError("`options.onCreateWorker` is not a function");var r=[],n=[];if(!("emnapi_async_worker_create"in t.exports))throw new TypeError("`emnapi_async_worker_create` is not exported, please try to add `--export=emnapi_async_worker_create` to linker flags");for(var a=0;a<e;++a)n.push(t.exports.emnapi_async_worker_create());try{var o=function(e){var t=v({type:"async-work"}),a=C.loadWasmModuleToWorker(t);M.addListener(t),r.push(a.then((function(){"function"==typeof t.unref&&t.unref()}))),M.unusedWorkers.push(t);var o=n[e];t.threadBlockBase=o,t.postMessage({__emnapi__:{type:"async-worker-init",payload:{arg:o}}})};for(a=0;a<e;++a)o(a)}catch(r){for(a=0;a<e;++a){var s=n[a];i(s)}throw r}return M.workerReady=Promise.all(r),M.workerReady},checkIdleWorker:function(){if(M.unusedWorkers.length>0&&M.workQueue.length>0){var e=M.unusedWorkers.shift(),r=M.workQueue.shift();M.runningWorkers.push(e),e.postMessage({__emnapi__:{type:"async-work-execute",payload:{work:r}}})}},getResource:function(e){return z.loadSizeTypeValue(e+M.offset.resource,!1)},getExecute:function(e){return z.loadSizeTypeValue(e+M.offset.execute,!1)},getComplete:function(e){return z.loadSizeTypeValue(e+M.offset.complete,!1)},getEnv:function(e){return z.loadSizeTypeValue(e+M.offset.env,!1)},getData:function(e){return z.loadSizeTypeValue(e+M.offset.data,!1)},scheduleWork:function(e){var r;if(c)(0,y.postMessage)({__emnapi__:{type:"async-work-queue",payload:{work:e}}});else if(d.increaseWaitingRequestCounter(),M.workQueue.push(e),null===(r=M.workerReady)||void 0===r?void 0:r.ready)M.checkIdleWorker();else{var t=function(e){throw d.decreaseWaitingRequestCounter(),e};try{M.initWorkers(m()).then((function(){M.workerReady.ready=!0,M.checkIdleWorker()}),t)}catch(e){t(e)}}},cancelWork:function(e){if(c)return(0,y.postMessage)({__emnapi__:{type:"async-work-cancel",payload:{work:e}}}),0;var r=M.workQueue.indexOf(e);return-1!==r?(M.workQueue.splice(r,1),d.feature.setImmediate((function(){d.decreaseWaitingRequestCounter(),M.checkIdleWorker(),M.callComplete(e,11)})),0):9},callComplete:function(e,r){var t=M.getComplete(e),n=M.getEnv(e),s=M.getData(e),i=d.envStore.get(n),u=d.openScope(i),c=function(){t&&i.callbackIntoModule(!0,(function(){o.get(t)(n,r,s)}))};try{if(p){var f=M.getResource(e),l=d.refStore.get(f).get(),v=d.handleStore.get(l).value,g=new DataView(a.buffer),y=g.getFloat64(e+M.offset.async_id,!0),h=g.getFloat64(e+M.offset.trigger_async_id,!0);p.node.makeCallback(v,c,[],{asyncId:y,triggerAsyncId:h})}else c()}finally{d.closeScope(i,u)}}},F=L?function(e,r,t,n,o,s,i){if(!e)return 1;var u,c=d.envStore.get(e);if(c.checkGCAccess(),!n)return c.setLastError(1);if(!i)return c.setLastError(1);if(u=r?Object(d.handleStore.get(r).value):{},!t)return c.setLastError(1);var f=String(d.handleStore.get(t).value),l=R.create(e,u,f,n,o,s);return new DataView(a.buffer).setInt32(i,l,!0),c.clearLastError()}:function(e,r,t,n,o,i,u){if(!e)return 1;var c,f=d.envStore.get(e);if(f.checkGCAccess(),!n)return f.setLastError(1);if(!u)return f.setLastError(1);if(c=r?Object(d.handleStore.get(r).value):{},!t)return f.setLastError(1);var l=M.offset.end,p=s(l);if(!p)return f.setLastError(9);new Uint8Array(a.buffer).subarray(p,p+l).fill(0);var v=f.ensureHandleId(c),g=d.createReference(f,v,1,1).id,y=new DataView(a.buffer);return y.setInt32(p,g,!0),G(v,t,-1,p+M.offset.async_id),y.setInt32(p+M.offset.env,e,!0),y.setInt32(p+M.offset.execute,n,!0),y.setInt32(p+M.offset.complete,o,!0),y.setInt32(p+M.offset.data,i,!0),y.setInt32(u,p,!0),f.clearLastError()},W=L?function(e,r){if(!e)return 1;var t=d.envStore.get(e);return t.checkGCAccess(),r?(R.remove(r),t.clearLastError()):t.setLastError(1)}:function(e,r){if(!e)return 1;var t=d.envStore.get(e);if(t.checkGCAccess(),!r)return t.setLastError(1);var n=M.getResource(r);if(d.refStore.get(n).dispose(),p){var o=new DataView(a.buffer);j(o.getFloat64(r+M.offset.async_id,!0),o.getFloat64(r+M.offset.trigger_async_id,!0))}return i(r),t.clearLastError()},J=L?function(e,r){if(!e)return 1;var t=d.envStore.get(e);return r?(R.queue(r),t.clearLastError()):t.setLastError(1)}:function(e,r){if(!e)return 1;var t=d.envStore.get(e);return r?(M.scheduleWork(r),t.clearLastError()):t.setLastError(1)},N=L?function(e,r){if(!e)return 1;var t=d.envStore.get(e);if(!r)return t.setLastError(1);var n=R.cancel(r);return 0===n?t.clearLastError():t.setLastError(n)}:function(e,r){if(!e)return 1;var t=d.envStore.get(e);if(!r)return t.setLastError(1);var n=M.cancelWork(r);return 0===n?t.clearLastError():t.setLastError(n)};y.initWorker=function(e){if(!y.childThread)throw new Error("startThread is only available in child threads");if("function"!=typeof t.exports.emnapi_async_worker_init)throw new TypeError("`emnapi_async_worker_init` is not exported, please try to add `--export=emnapi_async_worker_init` to linker flags");t.exports.emnapi_async_worker_init(e)},y.executeAsyncWork=function(e){if(c){var r=M.getExecute(e),t=M.getEnv(e),n=M.getData(e);o.get(r)(t,n),(0,y.postMessage)({__emnapi__:{type:"async-work-complete",payload:{work:e}}})}};var P=Object.freeze({__proto__:null,napi_cancel_async_work:N,napi_create_async_work:F,napi_delete_async_work:W,napi_queue_async_work:J}),q={registry:"function"==typeof FinalizationRegistry?new FinalizationRegistry((function(e){i(e)})):void 0,table:new WeakMap,wasmMemoryViewTable:new WeakMap,init:function(){q.registry="function"==typeof FinalizationRegistry?new FinalizationRegistry((function(e){i(e)})):void 0,q.table=new WeakMap,q.wasmMemoryViewTable=new WeakMap},isDetachedArrayBuffer:function(e){if(0===e.byteLength)try{new Uint8Array(e)}catch(e){return!0}return!1},getArrayBufferPointer:function(e,r){var t,n={address:0,ownership:0,runtimeAllocated:0};if(e===a.buffer)return n;var o=q.isDetachedArrayBuffer(e);if(q.table.has(e)){var i=q.table.get(e);return o?(i.address=0,i):(r&&0===i.ownership&&1===i.runtimeAllocated&&new Uint8Array(a.buffer).set(new Uint8Array(e),i.address),i)}if(o||0===e.byteLength)return n;if(!r)return n;var u=s(e.byteLength);if(!u)throw new Error("Out of memory");return new Uint8Array(a.buffer).set(new Uint8Array(e),u),n.address=u,n.ownership=q.registry?0:1,n.runtimeAllocated=1,q.table.set(e,n),null===(t=q.registry)||void 0===t||t.register(e,u),n},getOrUpdateMemoryView:function(e){if(e.buffer===a.buffer)return q.wasmMemoryViewTable.has(e)||q.wasmMemoryViewTable.set(e,{Ctor:e.constructor,address:e.byteOffset,length:e instanceof DataView?e.byteLength:e.length,ownership:1,runtimeAllocated:0}),e;if((q.isDetachedArrayBuffer(e.buffer)||"function"==typeof SharedArrayBuffer&&e.buffer instanceof SharedArrayBuffer)&&q.wasmMemoryViewTable.has(e)){var r=q.wasmMemoryViewTable.get(e),t=r.Ctor,n=void 0,o=d.feature.Buffer;return n="function"==typeof o&&t===o?o.from(a.buffer,r.address,r.length):new t(a.buffer,r.address,r.length),q.wasmMemoryViewTable.set(n,r),n}return e},getViewPointer:function(e,r){if((e=q.getOrUpdateMemoryView(e)).buffer===a.buffer){if(q.wasmMemoryViewTable.has(e)){var t=q.wasmMemoryViewTable.get(e);return{address:t.address,ownership:t.ownership,runtimeAllocated:t.runtimeAllocated,view:e}}return{address:e.byteOffset,ownership:1,runtimeAllocated:0,view:e}}var n=q.getArrayBufferPointer(e.buffer,r),o=n.address,s=n.ownership,i=n.runtimeAllocated;return{address:0===o?0:o+e.byteOffset,ownership:s,runtimeAllocated:i,view:e}}},H={utf8Decoder:void 0,utf16Decoder:void 0,init:function(){var e,r={decode:function(e){for(var r=0,t=Math.min(4096,e.length+1),n=new Uint16Array(t),a=[],o=0;;){var s=r<e.length;if(!s||o>=t-1){var i=n.subarray(0,o);if(a.push(String.fromCharCode.apply(null,i)),!s)return a.join("");e=e.subarray(r),r=0,o=0}var u=e[r++];if(0==(128&u))n[o++]=u;else if(192==(224&u)){var c=63&e[r++];n[o++]=(31&u)<<6|c}else if(224==(240&u)){c=63&e[r++];var f=63&e[r++];n[o++]=(31&u)<<12|c<<6|f}else if(240==(248&u)){var l=(7&u)<<18|(c=63&e[r++])<<12|(f=63&e[r++])<<6|63&e[r++];l>65535&&(l-=65536,n[o++]=l>>>10&1023|55296,l=56320|1023&l),n[o++]=l}}}};e="function"==typeof TextDecoder?new TextDecoder:r,H.utf8Decoder=e;var t,n={decode:function(e){var r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(r.length<=4096)return String.fromCharCode.apply(null,r);for(var t=[],n=0,a=0;n<r.length;n+=a)a=Math.min(4096,r.length-n),t.push(String.fromCharCode.apply(null,r.subarray(n,n+a)));return t.join("")}};t="function"==typeof TextDecoder?new TextDecoder("utf-16le"):n,H.utf16Decoder=t},lengthBytesUTF8:function(e){for(var r,t=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<=127?t++:r<=2047?t+=2:r>=55296&&r<=57343?(t+=4,++n):t+=3;return t},UTF8ToString:function(e,r){if(!e||!r)return"";e>>>=0;var t=new Uint8Array(a.buffer),n=e;if(-1===r)for(;t[n];)++n;else n=e+(r>>>0);if((r=n-e)<=16){for(var o=e,s="";o<n;){var i=t[o++];if(128&i){var u=63&t[o++];if(192!=(224&i)){var c=63&t[o++];if((i=224==(240&i)?(15&i)<<12|u<<6|c:(7&i)<<18|u<<12|c<<6|63&t[o++])<65536)s+=String.fromCharCode(i);else{var f=i-65536;s+=String.fromCharCode(55296|f>>10,56320|1023&f)}}else s+=String.fromCharCode((31&i)<<6|u)}else s+=String.fromCharCode(i)}return s}return H.utf8Decoder.decode("function"==typeof SharedArrayBuffer&&t.buffer instanceof SharedArrayBuffer?t.slice(e,n):t.subarray(e,n))},stringToUTF8:function(e,r,t){var n=new Uint8Array(a.buffer),o=r;if(!(t>0))return 0;for(var s=o>>>=0,i=o+t-1,u=0;u<e.length;++u){var c=e.charCodeAt(u);if(c>=55296&&c<=57343)c=65536+((1023&c)<<10)|1023&e.charCodeAt(++u);if(c<=127){if(o>=i)break;n[o++]=c}else if(c<=2047){if(o+1>=i)break;n[o++]=192|c>>6,n[o++]=128|63&c}else if(c<=65535){if(o+2>=i)break;n[o++]=224|c>>12,n[o++]=128|c>>6&63,n[o++]=128|63&c}else{if(o+3>=i)break;n[o++]=240|c>>18,n[o++]=128|c>>12&63,n[o++]=128|c>>6&63,n[o++]=128|63&c}}return n[o]=0,o-s},UTF16ToString:function(e,r){if(!e||!r)return"";var t=e>>>=0;if(-1===r){for(var n=t>>1,o=new Uint16Array(a.buffer);o[n];)++n;t=n<<1}else t=e+2*(r>>>0);if((r=t-e)<=32)return String.fromCharCode.apply(null,new Uint16Array(a.buffer,e,r/2));var s=new Uint8Array(a.buffer);return H.utf16Decoder.decode("function"==typeof SharedArrayBuffer&&s.buffer instanceof SharedArrayBuffer?s.slice(e,t):s.subarray(e,t))},stringToUTF16:function(e,r,t){if(void 0===t&&(t=2147483647),t<2)return 0;for(var n=r,o=(t-=2)<2*e.length?t/2:e.length,s=new DataView(a.buffer),i=0;i<o;++i){var u=e.charCodeAt(i);s.setInt16(r,u,!0),r+=2}return s.setInt16(r,0,!0),r-n},newString:function(e,r,t,n,o){if(!e)return 1;var s=d.envStore.get(e);s.checkGCAccess();var i=-1===t,u=t>>>0;if(0!==t&&!r)return s.setLastError(1);if(!n)return s.setLastError(1);if(!(i||u<=2147483647))return s.setLastError(1);var c=o(r,i,u),f=d.addToCurrentScope(c).id;return new DataView(a.buffer).setInt32(n,f,!0),s.clearLastError()},newExternalString:function(e,r,t,n,o,s,i,u,c){if(!e)return 1;var f=d.envStore.get(e);f.checkGCAccess();var l=-1===t,p=t>>>0;if(0!==t&&!r)return f.setLastError(1);if(!s)return f.setLastError(1);if(!(l||p<=2147483647))return f.setLastError(1);var v=u(e,r,t,s);if(0===v){if(i)new DataView(a.buffer).setInt8(i,1,!0);n&&f.callFinalizer(n,r,o)}return v}};function Q(e,r,t,n,o,s,i){if(!e)return 1;var u=d.envStore.get(e);if(u.checkGCAccess(),!r)return u.setLastError(1);var c=d.handleStore.get(r);if(!c.isTypedArray())return u.setLastError(1);var f,l=c.value,p=new DataView(a.buffer);if(t){var v=void 0;if(l instanceof Int8Array)v=0;else if(l instanceof Uint8Array)v=1;else if(l instanceof Uint8ClampedArray)v=2;else if(l instanceof Int16Array)v=3;else if(l instanceof Uint16Array)v=4;else if(l instanceof Int32Array)v=5;else if(l instanceof Uint32Array)v=6;else if(l instanceof Float32Array)v=7;else if(l instanceof Float64Array)v=8;else if(l instanceof BigInt64Array)v=9;else{if(!(l instanceof BigUint64Array))return u.setLastError(9);v=10}p.setInt32(t,v,!0)}if(n&&p.setUint32(n,l.length,!0),o||s){if(f=l.buffer,o){var g=q.getViewPointer(l,!0).address;p.setInt32(o,g,!0)}if(s){var y=u.ensureHandleId(f);p.setInt32(s,y,!0)}}return i&&p.setUint32(i,l.byteOffset,!0),u.clearLastError()}var $=Object.freeze({__proto__:null,napi_get_array_length:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);if(n.checkGCAccess(),!n.tryCatch.isEmpty())return n.setLastError(10);if(!n.canCallIntoJs())return n.setLastError(2147483647===n.moduleApiVersion?23:10);n.clearLastError();try{if(!r)return n.setLastError(1);if(!t)return n.setLastError(1);var o=d.handleStore.get(r);if(!o.isArray())return n.setLastError(8);var s=o.value.length>>>0;return new DataView(a.buffer).setUint32(t,s,!0),n.getReturnStatus()}catch(e){return n.tryCatch.setError(e),n.setLastError(10)}},napi_get_arraybuffer_info:function(e,r,t,n){if(!e)return 1;var o=d.envStore.get(e);if(o.checkGCAccess(),!r)return o.setLastError(1);var s=d.handleStore.get(r);if(!s.isArrayBuffer())return o.setLastError(1);var i=new DataView(a.buffer);if(t){var u=q.getArrayBufferPointer(s.value,!0).address;i.setInt32(t,u,!0)}return n&&i.setUint32(n,s.value.byteLength,!0),o.clearLastError()},napi_get_buffer_info:function(e,r,t,n){if(!e)return 1;var a=d.envStore.get(e);return a.checkGCAccess(),r&&d.handleStore.get(r).isBuffer()?Q(e,r,0,n,t,0,0):a.setLastError(1)},napi_get_dataview_info:function(e,r,t,n,o,s){if(!e)return 1;var i=d.envStore.get(e);if(i.checkGCAccess(),!r)return i.setLastError(1);var u=d.handleStore.get(r);if(!u.isDataView())return i.setLastError(1);var c,f=u.value,l=new DataView(a.buffer);if(t&&l.setUint32(t,f.byteLength,!0),n||o){if(c=f.buffer,n){var p=q.getViewPointer(f,!0).address;l.setInt32(n,p,!0)}if(o){var v=i.ensureHandleId(c);l.setInt32(o,v,!0)}}return s&&l.setUint32(s,f.byteOffset,!0),i.clearLastError()},napi_get_date_value:function(e,r,t){var n;if(!e)return 1;var o=d.envStore.get(e);if(o.checkGCAccess(),!o.tryCatch.isEmpty())return o.setLastError(10);if(!o.canCallIntoJs())return o.setLastError(2147483647===o.moduleApiVersion?23:10);o.clearLastError();try{if(!r)return o.setLastError(1);if(!t)return o.setLastError(1);var s=d.handleStore.get(r);return s.isDate()?(n=s.value.valueOf(),new DataView(a.buffer).setFloat64(t,n,!0),o.getReturnStatus()):o.setLastError(1)}catch(e){return o.tryCatch.setError(e),o.setLastError(10)}},napi_get_prototype:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);if(n.checkGCAccess(),!n.tryCatch.isEmpty())return n.setLastError(10);if(!n.canCallIntoJs())return n.setLastError(2147483647===n.moduleApiVersion?23:10);n.clearLastError();try{if(!r)return n.setLastError(1);if(!t)return n.setLastError(1);var o=d.handleStore.get(r);if(null==o.value)throw new TypeError("Cannot convert undefined or null to object");var s=void 0;try{s=o.isObject()||o.isFunction()?o.value:Object(o.value)}catch(e){return n.setLastError(2)}var i=n.ensureHandleId(Object.getPrototypeOf(s));return new DataView(a.buffer).setInt32(t,i,!0),n.getReturnStatus()}catch(e){return n.tryCatch.setError(e),n.setLastError(10)}},napi_get_typedarray_info:Q,napi_get_value_bigint_int64:function(e,r,t,n){if(!e)return 1;var o=d.envStore.get(e);if(o.checkGCAccess(),!d.feature.supportBigInt)return o.setLastError(9);if(!r)return o.setLastError(1);if(!t)return o.setLastError(1);if(!n)return o.setLastError(1);var s=d.handleStore.get(r).value;if("bigint"!=typeof s)return o.setLastError(6);var i=new DataView(a.buffer);s>=BigInt(-1)*(BigInt(1)<<BigInt(63))&&s<BigInt(1)<<BigInt(63)?i.setInt8(n,1,!0):(i.setInt8(n,0,!0),(s&=(BigInt(1)<<BigInt(64))-BigInt(1))>=BigInt(1)<<BigInt(63)&&(s-=BigInt(1)<<BigInt(64)));var u=Number(s&BigInt(4294967295)),c=Number(s>>BigInt(32));return i.setInt32(t,u,!0),i.setInt32(t+4,c,!0),o.clearLastError()},napi_get_value_bigint_uint64:function(e,r,t,n){if(!e)return 1;var o=d.envStore.get(e);if(o.checkGCAccess(),!d.feature.supportBigInt)return o.setLastError(9);if(!r)return o.setLastError(1);if(!t)return o.setLastError(1);if(!n)return o.setLastError(1);var s=d.handleStore.get(r).value;if("bigint"!=typeof s)return o.setLastError(6);var i=new DataView(a.buffer);s>=BigInt(0)&&s<BigInt(1)<<BigInt(64)?i.setInt8(n,1,!0):(i.setInt8(n,0,!0),s&=(BigInt(1)<<BigInt(64))-BigInt(1));var u=Number(s&BigInt(4294967295)),c=Number(s>>BigInt(32));return i.setUint32(t,u,!0),i.setUint32(t+4,c,!0),o.clearLastError()},napi_get_value_bigint_words:function(e,r,t,n,o){if(!e)return 1;var s=d.envStore.get(e);if(s.checkGCAccess(),!d.feature.supportBigInt)return s.setLastError(9);if(!r)return s.setLastError(1);if(!n)return s.setLastError(1);var i=d.handleStore.get(r);if(!i.isBigInt())return s.setLastError(17);for(var u=i.value<BigInt(0),c=new DataView(a.buffer),f=c.getUint32(n,!0),l=0,p=u?i.value*BigInt(-1):i.value;p!==BigInt(0);)l++,p>>=BigInt(64);if(p=u?i.value*BigInt(-1):i.value,t||o){if(!t)return s.setLastError(1);if(!o)return s.setLastError(1);for(var v=[];p!==BigInt(0);){var g=p&(BigInt(1)<<BigInt(64))-BigInt(1);v.push(g),p>>=BigInt(64)}for(var y=Math.min(f,v.length),h=0;h<y;h++){var E=Number(v[h]&BigInt(4294967295)),_=Number(v[h]>>BigInt(32));c.setUint32(o+8*h,E,!0),c.setUint32(o+8*h+4,_,!0)}c.setInt32(t,u?1:0,!0),c.setUint32(n,y,!0)}else f=l,c.setUint32(n,f,!0);return s.clearLastError()},napi_get_value_bool:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);if(n.checkGCAccess(),!r)return n.setLastError(1);if(!t)return n.setLastError(1);var o=d.handleStore.get(r);if("boolean"!=typeof o.value)return n.setLastError(7);var s=o.value?1:0;return new DataView(a.buffer).setInt8(t,s,!0),n.clearLastError()},napi_get_value_double:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);if(n.checkGCAccess(),!r)return n.setLastError(1);if(!t)return n.setLastError(1);var o=d.handleStore.get(r);if("number"!=typeof o.value)return n.setLastError(6);var s=o.value;return new DataView(a.buffer).setFloat64(t,s,!0),n.clearLastError()},napi_get_value_external:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);if(n.checkGCAccess(),!r)return n.setLastError(1);if(!t)return n.setLastError(1);var o=d.handleStore.get(r);if(!o.isExternal())return n.setLastError(1);var s=o.data(n);return new DataView(a.buffer).setInt32(t,s,!0),n.clearLastError()},napi_get_value_int32:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);if(n.checkGCAccess(),!r)return n.setLastError(1);if(!t)return n.setLastError(1);var o=d.handleStore.get(r);return"number"!=typeof o.value?n.setLastError(6):(new DataView(a.buffer).setInt32(t,o.value,!0),n.clearLastError())},napi_get_value_int64:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);if(n.checkGCAccess(),!r)return n.setLastError(1);if(!t)return n.setLastError(1);var o=d.handleStore.get(r);if("number"!=typeof o.value)return n.setLastError(6);var s=o.value,i=new DataView(a.buffer);return s===Number.POSITIVE_INFINITY||s===Number.NEGATIVE_INFINITY||isNaN(s)?(i.setInt32(t,0,!0),i.setInt32(t+4,0,!0)):s<-0x8000000000000000?(i.setInt32(t,0,!0),i.setInt32(t+4,2147483648,!0)):s>=0x8000000000000000?(i.setUint32(t,4294967295,!0),i.setUint32(t+4,2147483647,!0)):k(t,s),n.clearLastError()},napi_get_value_string_latin1:function(e,r,t,n,o){if(!e)return 1;var s=d.envStore.get(e);if(s.checkGCAccess(),!r)return s.setLastError(1);n>>>=0;var i=d.handleStore.get(r);if("string"!=typeof i.value)return s.setLastError(3);var u=new DataView(a.buffer);if(t)if(0!==n){for(var c=0,f=void 0,l=0;l<n-1;++l)f=255&i.value.charCodeAt(l),u.setUint8(t+l,f,!0),c++;u.setUint8(t+c,0,!0),o&&u.setUint32(o,c,!0)}else o&&u.setUint32(o,0,!0);else{if(!o)return s.setLastError(1);u.setUint32(o,i.value.length,!0)}return s.clearLastError()},napi_get_value_string_utf16:function(e,r,t,n,o){if(!e)return 1;var s=d.envStore.get(e);if(s.checkGCAccess(),!r)return s.setLastError(1);n>>>=0;var i=d.handleStore.get(r);if("string"!=typeof i.value)return s.setLastError(3);var u=new DataView(a.buffer);if(t)if(0!==n){var c=H.stringToUTF16(i.value,t,2*n);o&&u.setUint32(o,c/2,!0)}else o&&u.setUint32(o,0,!0);else{if(!o)return s.setLastError(1);u.setUint32(o,i.value.length,!0)}return s.clearLastError()},napi_get_value_string_utf8:function(e,r,t,n,o){if(!e)return 1;var s=d.envStore.get(e);if(s.checkGCAccess(),!r)return s.setLastError(1);n>>>=0;var i=d.handleStore.get(r);if("string"!=typeof i.value)return s.setLastError(3);var u=new DataView(a.buffer);if(t)if(0!==n){var c=H.stringToUTF8(i.value,t,n);o&&u.setUint32(o,c,!0)}else o&&u.setUint32(o,0,!0);else{if(!o)return s.setLastError(1);var f=H.lengthBytesUTF8(i.value);u.setUint32(o,f,!0)}return s.clearLastError()},napi_get_value_uint32:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);if(n.checkGCAccess(),!r)return n.setLastError(1);if(!t)return n.setLastError(1);var o=d.handleStore.get(r);return"number"!=typeof o.value?n.setLastError(6):(new DataView(a.buffer).setUint32(t,o.value,!0),n.clearLastError())}});function Y(e,r,t,n){return H.newString(e,r,t,n,(function(e,r,t){var n="",o=0,s=new DataView(a.buffer);if(r)for(;;){if(!(i=s.getUint8(e,!0)))break;n+=String.fromCharCode(i),e++}else for(;o<t;){var i;if(!(i=s.getUint8(e,!0)))break;n+=String.fromCharCode(i),o++,e++}return n}))}function X(e,r,t,n){return H.newString(e,r,t,n,(function(e){return H.UTF16ToString(e,t)}))}var Z=Object.freeze({__proto__:null,napi_create_bigint_int64:function(e,r,t,n){if(!e)return 1;var o,s=d.envStore.get(e);if(s.checkGCAccess(),!d.feature.supportBigInt)return s.setLastError(9);if(!t)return s.setLastError(1);o=r;var i=d.addToCurrentScope(o).id;return new DataView(a.buffer).setInt32(t,i,!0),s.clearLastError()},napi_create_bigint_uint64:function(e,r,t,n){if(!e)return 1;var o,s=d.envStore.get(e);if(s.checkGCAccess(),!d.feature.supportBigInt)return s.setLastError(9);if(!t)return s.setLastError(1);o=r&(BigInt(1)<<BigInt(64))-BigInt(1);var i=d.addToCurrentScope(o).id;return new DataView(a.buffer).setInt32(t,i,!0),s.clearLastError()},napi_create_bigint_words:function(e,r,t,n,o){var s,i;if(!e)return 1;var u=d.envStore.get(e);if(u.checkGCAccess(),!u.tryCatch.isEmpty())return u.setLastError(10);if(!u.canCallIntoJs())return u.setLastError(2147483647===u.moduleApiVersion?23:10);u.clearLastError();try{if(!d.feature.supportBigInt)return u.setLastError(9);if(!o)return u.setLastError(1);if((t>>>=0)>2147483647)return u.setLastError(1);if(t>16384)throw new RangeError("Maximum BigInt size exceeded");var c=BigInt(0),f=new DataView(a.buffer);for(i=0;i<t;i++){var l=f.getUint32(n+8*i,!0),p=f.getUint32(n+8*i+4,!0);c+=(BigInt(l)|BigInt(p)<<BigInt(32))<<BigInt(64*i)}return c*=BigInt(r)%BigInt(2)===BigInt(0)?BigInt(1):BigInt(-1),s=d.addToCurrentScope(c).id,f.setInt32(o,s,!0),u.getReturnStatus()}catch(e){return u.tryCatch.setError(e),u.setLastError(10)}},napi_create_double:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);if(n.checkGCAccess(),!t)return n.setLastError(1);var o=d.addToCurrentScope(r).id;return new DataView(a.buffer).setInt32(t,o,!0),n.clearLastError()},napi_create_int32:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);if(n.checkGCAccess(),!t)return n.setLastError(1);var o=d.addToCurrentScope(r).id;return new DataView(a.buffer).setInt32(t,o,!0),n.clearLastError()},napi_create_int64:function(e,r,t,n){if(!e)return 1;var o,s=d.envStore.get(e);if(s.checkGCAccess(),!t)return s.setLastError(1);o=Number(r);var i=d.addToCurrentScope(o).id;return new DataView(a.buffer).setInt32(t,i,!0),s.clearLastError()},napi_create_string_latin1:Y,napi_create_string_utf16:X,napi_create_string_utf8:function(e,r,t,n){return H.newString(e,r,t,n,(function(e){return H.UTF8ToString(e,t)}))},napi_create_uint32:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);if(n.checkGCAccess(),!t)return n.setLastError(1);var o=d.addToCurrentScope(r>>>0).id;return new DataView(a.buffer).setInt32(t,o,!0),n.clearLastError()},node_api_create_external_string_latin1:function(e,r,t,n,a,o,s){return H.newExternalString(e,r,t,n,a,o,s,Y,void 0)},node_api_create_external_string_utf16:function(e,r,t,n,a,o,s){return H.newExternalString(e,r,t,n,a,o,s,X,void 0)},node_api_create_property_key_utf16:function(e,r,t,n){return X(e,r,t,n)}});function K(e,r,t,n,a){var s,i=r&&t?H.UTF8ToString(r,t):"",u=function(){return function(){var r=d.cbinfoStack.push(this,a,arguments,s),t=d.openScope(e);try{return e.callIntoModule((function(e){var t=o.get(n)(e.id,r);return t?d.handleStore.get(t).value:void 0}))}finally{d.cbinfoStack.pop(),d.closeScope(e,t)}}};if(""===i)return{status:0,f:s=u()};if(!/^[_$a-zA-Z][_$a-zA-Z0-9]*$/.test(i))return{status:1,f:void 0};if(d.feature.supportNewFunction){var c=u();try{s=new Function("_","return function "+i+'(){"use strict";return _.apply(this,arguments);};')(c)}catch(e){s=u(),d.feature.canSetFunctionName&&Object.defineProperty(s,"name",{value:i})}}else s=u(),d.feature.canSetFunctionName&&Object.defineProperty(s,"name",{value:i});return{status:0,f:s}}function ee(e,r,t,n,a,o,s,i,u){if(a||o){var c=void 0,f=void 0;a&&(c=K(e,0,0,a,u).f),o&&(f=K(e,0,0,o,u).f);var l={configurable:0!=(4&i),enumerable:0!=(2&i),get:c,set:f};Object.defineProperty(r,t,l)}else if(n){l={configurable:0!=(4&i),enumerable:0!=(2&i),writable:0!=(1&i),value:K(e,0,0,n,u).f};Object.defineProperty(r,t,l)}else{l={configurable:0!=(4&i),enumerable:0!=(2&i),writable:0!=(1&i),value:d.handleStore.get(s).value};Object.defineProperty(r,t,l)}}function re(e){var r=d.handleStore.get(e);return r.isObject()||r.isFunction()?(void 0!==q&&ArrayBuffer.isView(r.value)&&q.wasmMemoryViewTable.has(r.value)&&(r=d.addToCurrentScope(q.wasmMemoryViewTable.get(r.value))),{status:0,handle:r}):{status:1}}function te(e,r,t,n){var o;if(!e)return 1;var s=d.envStore.get(e);if(s.checkGCAccess(),!s.tryCatch.isEmpty())return s.setLastError(10);if(!s.canCallIntoJs())return s.setLastError(2147483647===s.moduleApiVersion?23:10);s.clearLastError();try{if(!r)return s.setLastError(1);if(0===n&&!t)return s.setLastError(1);var i=d.handleStore.get(r);if(!i.isObject()&&!i.isFunction())return s.setLastError(1);var u=s.getObjectBinding(i.value),c=u.wrapped,f=d.refStore.get(c);if(!f)return s.setLastError(1);if(t)o=f.data(),new DataView(a.buffer).setInt32(t,o,!0);return 1===n&&(u.wrapped=0,1===f.ownership()?f.resetFinalizer():f.dispose()),s.getReturnStatus()}catch(e){return s.tryCatch.setError(e),s.setLastError(10)}}function ne(e,r,t,n,o,s){if(!e)return 1;var i=d.envStore.get(e);if(i.checkGCAccess(),!d.feature.supportFinalizer)return i.setLastError(9);if(!r)return i.setLastError(1);if(!n)return i.setLastError(1);var u=re(r);if(0!==u.status)return i.setLastError(u.status);var c=u.handle,f=s?1:0,l=d.createReference(i,c.id,0,f,n,t,o);if(s){var p=l.id;new DataView(a.buffer).setInt32(s,p,!0)}return i.clearLastError()}var ae=Object.freeze({__proto__:null,napi_add_finalizer:ne,napi_check_object_type_tag:function(e,r,t,n){var o=!0;if(!e)return 1;var s=d.envStore.get(e);if(s.checkGCAccess(),!s.tryCatch.isEmpty())return s.setLastError(10);if(!s.canCallIntoJs())return s.setLastError(2147483647===s.moduleApiVersion?23:10);s.clearLastError();try{if(!r)return s.setLastError(s.tryCatch.hasCaught()?10:1);var i=d.handleStore.get(r);if(!i.isObject()&&!i.isFunction())return s.setLastError(s.tryCatch.hasCaught()?10:2);if(!t)return s.setLastError(s.tryCatch.hasCaught()?10:1);if(!n)return s.setLastError(s.tryCatch.hasCaught()?10:1);var u=s.getObjectBinding(i.value);if(null!==u.tag){var c=u.tag,f=new Uint32Array(a.buffer,t,4);o=c[0]===f[0]&&c[1]===f[1]&&c[2]===f[2]&&c[3]===f[3]}else o=!1;return new DataView(a.buffer).setInt8(n,o?1:0,!0),s.getReturnStatus()}catch(e){return s.tryCatch.setError(e),s.setLastError(10)}},napi_define_class:function(e,r,t,n,o,s,i,u){var c,f,l;if(!e)return 1;var p=d.envStore.get(e);if(p.checkGCAccess(),!p.tryCatch.isEmpty())return p.setLastError(10);if(!p.canCallIntoJs())return p.setLastError(2147483647===p.moduleApiVersion?23:10);p.clearLastError();try{if(!u)return p.setLastError(1);if(!n)return p.setLastError(1);if((s>>>=0)>0&&!i)return p.setLastError(1);if(t<-1||t>2147483647||!r)return p.setLastError(1);var v=K(p,r,t,n,o);if(0!==v.status)return p.setLastError(v.status);for(var g=v.f,y=void 0,h=new DataView(a.buffer),E=0;E<s;E++){c=i+32*E;var _=h.getInt32(c,!0),w=h.getInt32(c+4,!0),L=h.getInt32(c+8,!0),m=h.getInt32(c+12,!0),b=h.getInt32(c+16,!0),S=h.getInt32(c+20,!0);l=h.getInt32(c+24,!0);var C=h.getInt32(c+28,!0);if(_)y=H.UTF8ToString(_,-1);else{if(!w)return p.setLastError(4);if("string"!=typeof(y=d.handleStore.get(w).value)&&"symbol"!=typeof y)return p.setLastError(4)}0==(1024&l)?ee(p,g.prototype,y,L,m,b,S,l,C):ee(p,g,y,L,m,b,S,l,C)}return f=d.addToCurrentScope(g).id,h.setInt32(u,f,!0),p.getReturnStatus()}catch(e){return p.tryCatch.setError(e),p.setLastError(10)}},napi_remove_wrap:function(e,r,t){return te(e,r,t,1)},napi_type_tag_object:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);if(n.checkGCAccess(),!n.tryCatch.isEmpty())return n.setLastError(10);if(!n.canCallIntoJs())return n.setLastError(2147483647===n.moduleApiVersion?23:10);n.clearLastError();try{if(!r)return n.setLastError(n.tryCatch.hasCaught()?10:1);var o=d.handleStore.get(r);if(!o.isObject()&&!o.isFunction())return n.setLastError(n.tryCatch.hasCaught()?10:2);if(!t)return n.setLastError(n.tryCatch.hasCaught()?10:1);var s=n.getObjectBinding(o.value);if(null!==s.tag)return n.setLastError(n.tryCatch.hasCaught()?10:1);var i=new Uint8Array(16);return i.set(new Uint8Array(a.buffer,t,16)),s.tag=new Uint32Array(i.buffer),n.getReturnStatus()}catch(e){return n.tryCatch.setError(e),n.setLastError(10)}},napi_unwrap:function(e,r,t){return te(e,r,t,0)},napi_wrap:function(e,r,t,n,o,s){return function(e,r,t,n,o,s){var i;if(!e)return 1;var u=d.envStore.get(e);if(u.checkGCAccess(),!u.tryCatch.isEmpty())return u.setLastError(10);if(!u.canCallIntoJs())return u.setLastError(2147483647===u.moduleApiVersion?23:10);u.clearLastError();try{if(!d.feature.supportFinalizer){if(n)throw d.createNotSupportWeakRefError("napi_wrap",'Parameter "finalize_cb" must be 0(NULL)');if(s)throw d.createNotSupportWeakRefError("napi_wrap",'Parameter "result" must be 0(NULL)')}if(!r)return u.setLastError(1);var c=re(r);if(0!==c.status)return u.setLastError(c.status);var f=c.handle;if(0!==u.getObjectBinding(f.value).wrapped)return u.setLastError(1);var l=void 0;if(s){if(!n)return u.setLastError(1);i=(l=d.createReference(u,f.id,0,1,n,t,o)).id,new DataView(a.buffer).setInt32(s,i,!0)}else l=d.createReference(u,f.id,0,0,n,t,n?o:n);return u.getObjectBinding(f.value).wrapped=l.id,u.getReturnStatus()}catch(e){return u.tryCatch.setError(e),u.setLastError(10)}}(e,r,t,n,o,s)},node_api_post_finalizer:function(e,r,t,n){if(!e)return 1;var a=d.envStore.get(e);return a.enqueueFinalizer(d.createTrackedFinalizer(a,r,t,n)),a.clearLastError()}});function oe(e,r,t,n,o,s,i){var u;if(!e)return 1;var c=d.envStore.get(e);if(c.checkGCAccess(),!c.tryCatch.isEmpty())return c.setLastError(10);if(!c.canCallIntoJs())return c.setLastError(2147483647===c.moduleApiVersion?23:10);c.clearLastError();try{if(!i)return c.setLastError(1);if(n>>>=0,t||(n=0),n>2147483647)throw new RangeError("Cannot create a memory view larger than 2147483647 bytes");if(t+n>a.buffer.byteLength)throw new RangeError("Memory out of range");if(!d.feature.supportFinalizer&&o)throw d.createNotSupportWeakRefError("emnapi_create_memory_view",'Parameter "finalize_cb" must be 0(NULL)');var f=void 0;switch(r){case 0:f={Ctor:Int8Array,address:t,length:n,ownership:1,runtimeAllocated:0};break;case 1:f={Ctor:Uint8Array,address:t,length:n,ownership:1,runtimeAllocated:0};break;case 2:f={Ctor:Uint8ClampedArray,address:t,length:n,ownership:1,runtimeAllocated:0};break;case 3:f={Ctor:Int16Array,address:t,length:n>>1,ownership:1,runtimeAllocated:0};break;case 4:f={Ctor:Uint16Array,address:t,length:n>>1,ownership:1,runtimeAllocated:0};break;case 5:f={Ctor:Int32Array,address:t,length:n>>2,ownership:1,runtimeAllocated:0};break;case 6:f={Ctor:Uint32Array,address:t,length:n>>2,ownership:1,runtimeAllocated:0};break;case 7:f={Ctor:Float32Array,address:t,length:n>>2,ownership:1,runtimeAllocated:0};break;case 8:f={Ctor:Float64Array,address:t,length:n>>3,ownership:1,runtimeAllocated:0};break;case 9:f={Ctor:BigInt64Array,address:t,length:n>>3,ownership:1,runtimeAllocated:0};break;case 10:f={Ctor:BigUint64Array,address:t,length:n>>3,ownership:1,runtimeAllocated:0};break;case-1:f={Ctor:DataView,address:t,length:n,ownership:1,runtimeAllocated:0};break;case-2:if(!d.feature.Buffer)throw d.createNotSupportBufferError("emnapi_create_memory_view","");f={Ctor:d.feature.Buffer,address:t,length:n,ownership:1,runtimeAllocated:0};break;default:return c.setLastError(1)}var l=f.Ctor,p=-2===r?d.feature.Buffer.from(a.buffer,f.address,f.length):new l(a.buffer,f.address,f.length),v=d.addToCurrentScope(p);if(q.wasmMemoryViewTable.set(p,f),o){var g=ne(e,v.id,t,o,s,0);if(10===g){var y=c.tryCatch.extractException();throw c.clearLastError(),y}if(0!==g)return c.setLastError(g)}return u=v.id,new DataView(a.buffer).setInt32(i,u,!0),c.getReturnStatus()}catch(y){return c.tryCatch.setError(y),c.setLastError(10)}}function se(e,r,t,n){var o;if(t=null!=t?t:0,t>>>=0,r instanceof ArrayBuffer){if(!(i=q.getArrayBufferPointer(r,!1).address))throw new Error("Unknown ArrayBuffer address");if("number"==typeof n&&-1!==n||(n=r.byteLength-t),0===(n>>>=0))return r;o=new Uint8Array(r,t,n);var s=new Uint8Array(a.buffer);return e?s.set(o,i):o.set(s.subarray(i,i+n)),r}if(ArrayBuffer.isView(r)){var i,u=q.getViewPointer(r,!1),c=u.view;if(!(i=u.address))throw new Error("Unknown ArrayBuffer address");if("number"==typeof n&&-1!==n||(n=c.byteLength-t),0===(n>>>=0))return c;o=new Uint8Array(c.buffer,c.byteOffset+t,n);s=new Uint8Array(a.buffer);return e?s.set(o,i):o.set(s.subarray(i,i+n)),c}throw new TypeError("emnapiSyncMemory expect ArrayBuffer or ArrayBufferView as first parameter")}function ie(e){var r,t=e instanceof ArrayBuffer,n=e instanceof DataView,a=ArrayBuffer.isView(e)&&!n;if(!t&&!a&&!n)throw new TypeError("emnapiGetMemoryAddress expect ArrayBuffer or ArrayBufferView as first parameter");return{address:(r=t?q.getArrayBufferPointer(e,!1):q.getViewPointer(e,!1)).address,ownership:r.ownership,runtimeAllocated:r.runtimeAllocated}}var ue=Object.freeze({__proto__:null,$emnapiGetMemoryAddress:ie,$emnapiSyncMemory:se,emnapi_create_memory_view:oe,emnapi_get_memory_address:function(e,r,t,n,o){var s,i,u,c;if(!e)return 1;var f=d.envStore.get(e);if(f.checkGCAccess(),!f.tryCatch.isEmpty())return f.setLastError(10);if(!f.canCallIntoJs())return f.setLastError(2147483647===f.moduleApiVersion?23:10);f.clearLastError();try{if(!r)return f.setLastError(1);if(!t&&!n&&!o)return f.setLastError(1);s=(c=ie(f.ctx.handleStore.get(r).value)).address;var l=new DataView(a.buffer);return t&&l.setInt32(t,s,!0),n&&(u=c.ownership,l.setInt32(n,u,!0)),o&&(i=c.runtimeAllocated,l.setInt8(o,i,!0)),f.getReturnStatus()}catch(e){return f.tryCatch.setError(e),f.setLastError(10)}},emnapi_get_runtime_version:function(e,r){if(!e)return 1;var t,n=d.envStore.get(e);if(!r)return n.setLastError(1);try{t=d.getRuntimeVersions().version}catch(e){return n.setLastError(9)}var o=t.split(".").map((function(e){return Number(e)})),s=new DataView(a.buffer);return s.setUint32(r,o[0],!0),s.setUint32(r+4,o[1],!0),s.setUint32(r+8,o[2],!0),n.clearLastError()},emnapi_is_node_binding_available:function(){return p?1:0},emnapi_is_support_bigint:function(){return d.feature.supportBigInt?1:0},emnapi_is_support_weakref:function(){return d.feature.supportFinalizer?1:0},emnapi_sync_memory:function(e,r,t,n,o){var s;if(!e)return 1;var i=d.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(2147483647===i.moduleApiVersion?23:10);i.clearLastError();try{if(!t)return i.setLastError(1);var u=new DataView(a.buffer),c=u.getInt32(t,!0),f=i.ctx.handleStore.get(c);if(!f.isArrayBuffer()&&!f.isTypedArray()&&!f.isDataView())return i.setLastError(1);var l=se(Boolean(r),f.value,n,o);return f.value!==l&&(s=i.ensureHandleId(l),u.setInt32(t,s,!0)),i.getReturnStatus()}catch(e){return i.tryCatch.setError(e),i.setLastError(10)}}});function ce(e,r){e>>>=0;var t=new ArrayBuffer(e);if(r){var n=q.getArrayBufferPointer(t,!0).address;new DataView(a.buffer).setInt32(r,n,!0)}return t}var fe=Object.freeze({__proto__:null,napi_create_array:function(e,r){if(!e)return 1;var t=d.envStore.get(e);if(t.checkGCAccess(),!r)return t.setLastError(1);var n=d.addToCurrentScope([]).id;return new DataView(a.buffer).setInt32(r,n,!0),t.clearLastError()},napi_create_array_with_length:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);if(n.checkGCAccess(),!t)return n.setLastError(1);r>>>=0;var o=d.addToCurrentScope(new Array(r)).id;return new DataView(a.buffer).setInt32(t,o,!0),n.clearLastError()},napi_create_arraybuffer:function(e,r,t,n){var o;if(!e)return 1;var s=d.envStore.get(e);if(s.checkGCAccess(),!s.tryCatch.isEmpty())return s.setLastError(10);if(!s.canCallIntoJs())return s.setLastError(2147483647===s.moduleApiVersion?23:10);s.clearLastError();try{if(!n)return s.setLastError(1);var i=ce(r,t);return o=d.addToCurrentScope(i).id,new DataView(a.buffer).setInt32(n,o,!0),s.getReturnStatus()}catch(e){return s.tryCatch.setError(e),s.setLastError(10)}},napi_create_buffer:function(e,r,t,n){var o,i,u;if(!e)return 1;var c=d.envStore.get(e);if(c.checkGCAccess(),!c.tryCatch.isEmpty())return c.setLastError(10);if(!c.canCallIntoJs())return c.setLastError(2147483647===c.moduleApiVersion?23:10);c.clearLastError();try{if(!n)return c.setLastError(1);var f=d.feature.Buffer;if(!f)throw d.createNotSupportBufferError("napi_create_buffer","");var l=void 0;r>>>=0;var p=new DataView(a.buffer);if(t&&0!==r){if(!(u=s(r)))throw new Error("Out of memory");new Uint8Array(a.buffer).subarray(u,u+r).fill(0);var v=f.from(a.buffer,u,r),g={Ctor:f,address:u,length:r,ownership:q.registry?0:1,runtimeAllocated:1};q.wasmMemoryViewTable.set(v,g),null===(o=q.registry)||void 0===o||o.register(g,u),i=d.addToCurrentScope(v).id,p.setInt32(n,i,!0),p.setInt32(t,u,!0)}else l=f.alloc(r),i=d.addToCurrentScope(l).id,p.setInt32(n,i,!0);return c.getReturnStatus()}catch(e){return c.tryCatch.setError(e),c.setLastError(10)}},napi_create_buffer_copy:function(e,r,t,n,o){var s;if(!e)return 1;var i=d.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(2147483647===i.moduleApiVersion?23:10);i.clearLastError();try{if(!o)return i.setLastError(1);var u=d.feature.Buffer;if(!u)throw d.createNotSupportBufferError("napi_create_buffer_copy","");var c=ce(r,n),f=u.from(c);return f.set(new Uint8Array(a.buffer).subarray(t,t+r)),s=d.addToCurrentScope(f).id,new DataView(a.buffer).setInt32(o,s,!0),i.getReturnStatus()}catch(e){return i.tryCatch.setError(e),i.setLastError(10)}},napi_create_dataview:function(e,r,t,n,o){var s;if(!e)return 1;var i=d.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(2147483647===i.moduleApiVersion?23:10);i.clearLastError();try{if(!t)return i.setLastError(1);if(!o)return i.setLastError(1);r>>>=0,n>>>=0;var u=d.handleStore.get(t).value;if(!(u instanceof ArrayBuffer))return i.setLastError(1);if(r+n>u.byteLength){var c=new RangeError("byte_offset + byte_length should be less than or equal to the size in bytes of the array passed in");throw c.code="ERR_NAPI_INVALID_DATAVIEW_ARGS",c}var f=new DataView(u,n,r);return u===a.buffer&&(q.wasmMemoryViewTable.has(f)||q.wasmMemoryViewTable.set(f,{Ctor:DataView,address:n,length:r,ownership:1,runtimeAllocated:0})),s=d.addToCurrentScope(f).id,new DataView(a.buffer).setInt32(o,s,!0),i.getReturnStatus()}catch(c){return i.tryCatch.setError(c),i.setLastError(10)}},napi_create_date:function(e,r,t){var n;if(!e)return 1;var o=d.envStore.get(e);if(o.checkGCAccess(),!o.tryCatch.isEmpty())return o.setLastError(10);if(!o.canCallIntoJs())return o.setLastError(2147483647===o.moduleApiVersion?23:10);o.clearLastError();try{return t?(n=d.addToCurrentScope(new Date(r)).id,new DataView(a.buffer).setInt32(t,n,!0),o.getReturnStatus()):o.setLastError(1)}catch(e){return o.tryCatch.setError(e),o.setLastError(10)}},napi_create_external:function(e,r,t,n,o){var s;if(!e)return 1;var i=d.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(2147483647===i.moduleApiVersion?23:10);i.clearLastError();try{if(!o)return i.setLastError(1);if(!d.feature.supportFinalizer&&t)throw d.createNotSupportWeakRefError("napi_create_external",'Parameter "finalize_cb" must be 0(NULL)');var u=d.getCurrentScope().addExternal(i,r);return t&&d.createReference(i,u.id,0,0,t,r,n),s=u.id,new DataView(a.buffer).setInt32(o,s,!0),i.clearLastError()}catch(e){return i.tryCatch.setError(e),i.setLastError(10)}},napi_create_external_arraybuffer:function(e,r,t,n,o,s){var i;if(!e)return 1;var u=d.envStore.get(e);if(u.checkGCAccess(),!u.tryCatch.isEmpty())return u.setLastError(10);if(!u.canCallIntoJs())return u.setLastError(2147483647===u.moduleApiVersion?23:10);u.clearLastError();try{if(!s)return u.setLastError(1);if(t>>>=0,r||(t=0),r+t>a.buffer.byteLength)throw new RangeError("Memory out of range");if(!d.feature.supportFinalizer&&n)throw d.createNotSupportWeakRefError("napi_create_external_arraybuffer",'Parameter "finalize_cb" must be 0(NULL)');var c=new ArrayBuffer(t);if(0===t)try{(new(0,d.feature.MessageChannel)).port1.postMessage(c,[c])}catch(e){}else new Uint8Array(c).set(new Uint8Array(a.buffer).subarray(r,r+t)),q.table.set(c,{address:r,ownership:1,runtimeAllocated:0});var f=d.addToCurrentScope(c);if(n){var l=ne(e,f.id,r,n,o,0);if(10===l){var p=u.tryCatch.extractException();throw u.clearLastError(),p}if(0!==l)return u.setLastError(l)}return i=f.id,new DataView(a.buffer).setInt32(s,i,!0),u.getReturnStatus()}catch(p){return u.tryCatch.setError(p),u.setLastError(10)}},napi_create_external_buffer:function(e,r,t,n,a,o){return oe(e,-2,t,r,n,a,o)},napi_create_object:function(e,r){if(!e)return 1;var t=d.envStore.get(e);if(t.checkGCAccess(),!r)return t.setLastError(1);var n=d.addToCurrentScope({}).id;return new DataView(a.buffer).setInt32(r,n,!0),t.clearLastError()},napi_create_symbol:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);if(n.checkGCAccess(),!t)return n.setLastError(1);var o=new DataView(a.buffer);if(r){var s=d.handleStore.get(r).value;if("string"!=typeof s)return n.setLastError(3);var i=d.addToCurrentScope(Symbol(s)).id;o.setInt32(t,i,!0)}else{var u=d.addToCurrentScope(Symbol()).id;o.setInt32(t,u,!0)}return n.clearLastError()},napi_create_typedarray:function(e,r,t,n,o,s){var i;if(!e)return 1;var u=d.envStore.get(e);if(u.checkGCAccess(),!u.tryCatch.isEmpty())return u.setLastError(10);if(!u.canCallIntoJs())return u.setLastError(2147483647===u.moduleApiVersion?23:10);u.clearLastError();try{if(!n)return u.setLastError(1);if(!s)return u.setLastError(1);var c=d.handleStore.get(n).value;if(!(c instanceof ArrayBuffer))return u.setLastError(1);var f=function(e,r,t,n,o,u){var c,f;if((o>>>=0,u>>>=0,t>1)&&o%t!=0)return(f=new RangeError("start offset of ".concat(null!==(c=r.name)&&void 0!==c?c:""," should be a multiple of ").concat(t))).code="ERR_NAPI_INVALID_TYPEDARRAY_ALIGNMENT",e.tryCatch.setError(f),e.setLastError(9);if(u*t+o>n.byteLength)return(f=new RangeError("Invalid typed array length")).code="ERR_NAPI_INVALID_TYPEDARRAY_LENGTH",e.tryCatch.setError(f),e.setLastError(9);var l=new r(n,o,u);return n===a.buffer&&(q.wasmMemoryViewTable.has(l)||q.wasmMemoryViewTable.set(l,{Ctor:r,address:o,length:u,ownership:1,runtimeAllocated:0})),i=d.addToCurrentScope(l).id,new DataView(a.buffer).setInt32(s,i,!0),e.getReturnStatus()};switch(r){case 0:return f(u,Int8Array,1,c,o,t);case 1:return f(u,Uint8Array,1,c,o,t);case 2:return f(u,Uint8ClampedArray,1,c,o,t);case 3:return f(u,Int16Array,2,c,o,t);case 4:return f(u,Uint16Array,2,c,o,t);case 5:return f(u,Int32Array,4,c,o,t);case 6:return f(u,Uint32Array,4,c,o,t);case 7:return f(u,Float32Array,4,c,o,t);case 8:return f(u,Float64Array,8,c,o,t);case 9:return f(u,BigInt64Array,8,c,o,t);case 10:return f(u,BigUint64Array,8,c,o,t);default:return u.setLastError(1)}}catch(e){return u.tryCatch.setError(e),u.setLastError(10)}},node_api_symbol_for:function(e,r,t,n){if(!e)return 1;var o=d.envStore.get(e);if(o.checkGCAccess(),!n)return o.setLastError(1);var s=-1===t,i=t>>>0;if(0!==t&&!r)return o.setLastError(1);if(!(s||i<=2147483647))return o.setLastError(1);var u=H.UTF8ToString(r,t),c=d.addToCurrentScope(Symbol.for(u)).id;return new DataView(a.buffer).setInt32(n,c,!0),o.clearLastError()}});var le=Object.freeze({__proto__:null,napi_get_boolean:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);if(n.checkGCAccess(),!t)return n.setLastError(1);var o=0===r?3:4;return new DataView(a.buffer).setInt32(t,o,!0),n.clearLastError()},napi_get_global:function(e,r){if(!e)return 1;var t=d.envStore.get(e);return t.checkGCAccess(),r?(new DataView(a.buffer).setInt32(r,5,!0),t.clearLastError()):t.setLastError(1)},napi_get_null:function(e,r){if(!e)return 1;var t=d.envStore.get(e);return t.checkGCAccess(),r?(new DataView(a.buffer).setInt32(r,2,!0),t.clearLastError()):t.setLastError(1)},napi_get_undefined:function(e,r){if(!e)return 1;var t=d.envStore.get(e);return t.checkGCAccess(),r?(new DataView(a.buffer).setInt32(r,1,!0),t.clearLastError()):t.setLastError(1)}});var de=Object.freeze({__proto__:null,napi_get_instance_data:function(e,r){if(!e)return 1;var t=d.envStore.get(e);if(!r)return t.setLastError(1);var n=t.getInstanceData();return new DataView(a.buffer).setInt32(r,n,!0),t.clearLastError()},napi_set_instance_data:function(e,r,t,n){if(!e)return 1;var a=d.envStore.get(e);return a.setInstanceData(r,t,n),a.clearLastError()}});var pe=Object.freeze({__proto__:null,_emnapi_get_last_error_info:function(e,r,t,n){var o=d.envStore.get(e).lastError,s=o.errorCode,i=o.engineErrorCode>>>0,u=o.engineReserved,c=new DataView(a.buffer);c.setInt32(r,s,!0),c.setUint32(t,i,!0),c.setInt32(n,u,!0)},napi_create_error:function(e,r,t,n){if(!e)return 1;var o=d.envStore.get(e);if(o.checkGCAccess(),!t)return o.setLastError(1);if(!n)return o.setLastError(1);var s=d.handleStore.get(t).value;if("string"!=typeof s)return o.setLastError(3);var i=new Error(s);if(r){var u=d.handleStore.get(r).value;if("string"!=typeof u)return o.setLastError(3);i.code=u}var c=d.addToCurrentScope(i).id;return new DataView(a.buffer).setInt32(n,c,!0),o.clearLastError()},napi_create_range_error:function(e,r,t,n){if(!e)return 1;var o=d.envStore.get(e);if(o.checkGCAccess(),!t)return o.setLastError(1);if(!n)return o.setLastError(1);var s=d.handleStore.get(t).value;if("string"!=typeof s)return o.setLastError(3);var i=new RangeError(s);if(r){var u=d.handleStore.get(r).value;if("string"!=typeof u)return o.setLastError(3);i.code=u}var c=d.addToCurrentScope(i).id;return new DataView(a.buffer).setInt32(n,c,!0),o.clearLastError()},napi_create_type_error:function(e,r,t,n){if(!e)return 1;var o=d.envStore.get(e);if(o.checkGCAccess(),!t)return o.setLastError(1);if(!n)return o.setLastError(1);var s=d.handleStore.get(t).value;if("string"!=typeof s)return o.setLastError(3);var i=new TypeError(s);if(r){var u=d.handleStore.get(r).value;if("string"!=typeof u)return o.setLastError(3);i.code=u}var c=d.addToCurrentScope(i).id;return new DataView(a.buffer).setInt32(n,c,!0),o.clearLastError()},napi_fatal_error:function(e,r,t,n){var a=H.UTF8ToString(e,r),o=H.UTF8ToString(t,n);p?p.napi.fatalError(a,o):l("FATAL ERROR: "+a+" "+o)},napi_fatal_exception:function(e,r){if(!e)return 1;var t=d.envStore.get(e);if(t.checkGCAccess(),!t.tryCatch.isEmpty())return t.setLastError(10);if(!t.canCallIntoJs())return t.setLastError(2147483647===t.moduleApiVersion?23:10);t.clearLastError();try{if(!r)return t.setLastError(1);var n=t.ctx.handleStore.get(r);try{t.triggerFatalException(n.value)}catch(e){return t.setLastError(9)}return t.clearLastError()}catch(r){return t.tryCatch.setError(r),t.setLastError(10)}},napi_get_and_clear_last_exception:function(e,r){if(!e)return 1;var t=d.envStore.get(e);if(t.checkGCAccess(),!r)return t.setLastError(1);var n=new DataView(a.buffer);if(!t.tryCatch.hasCaught())return n.setInt32(r,1,!0),t.clearLastError();var o=t.tryCatch.exception(),s=t.ensureHandleId(o);return n.setInt32(r,s,!0),t.tryCatch.reset(),t.clearLastError()},napi_is_exception_pending:function(e,r){if(!e)return 1;var t=d.envStore.get(e);if(t.checkGCAccess(),!r)return t.setLastError(1);var n=t.tryCatch.hasCaught();return new DataView(a.buffer).setInt8(r,n?1:0,!0),t.clearLastError()},napi_throw:function(e,r){if(!e)return 1;var t=d.envStore.get(e);if(t.checkGCAccess(),!t.tryCatch.isEmpty())return t.setLastError(10);if(!t.canCallIntoJs())return t.setLastError(2147483647===t.moduleApiVersion?23:10);t.clearLastError();try{return r?(t.tryCatch.setError(d.handleStore.get(r).value),t.clearLastError()):t.setLastError(1)}catch(e){return t.tryCatch.setError(e),t.setLastError(10)}},napi_throw_error:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);if(n.checkGCAccess(),!n.tryCatch.isEmpty())return n.setLastError(10);if(!n.canCallIntoJs())return n.setLastError(2147483647===n.moduleApiVersion?23:10);n.clearLastError();try{if(!t)return n.setLastError(1);var a=new Error(H.UTF8ToString(t,-1));return r&&(a.code=H.UTF8ToString(r,-1)),n.tryCatch.setError(a),n.clearLastError()}catch(e){return n.tryCatch.setError(e),n.setLastError(10)}},napi_throw_range_error:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);if(n.checkGCAccess(),!n.tryCatch.isEmpty())return n.setLastError(10);if(!n.canCallIntoJs())return n.setLastError(2147483647===n.moduleApiVersion?23:10);n.clearLastError();try{if(!t)return n.setLastError(1);var a=new RangeError(H.UTF8ToString(t,-1));return r&&(a.code=H.UTF8ToString(r,-1)),n.tryCatch.setError(a),n.clearLastError()}catch(e){return n.tryCatch.setError(e),n.setLastError(10)}},napi_throw_type_error:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);if(n.checkGCAccess(),!n.tryCatch.isEmpty())return n.setLastError(10);if(!n.canCallIntoJs())return n.setLastError(2147483647===n.moduleApiVersion?23:10);n.clearLastError();try{if(!t)return n.setLastError(1);var a=new TypeError(H.UTF8ToString(t,-1));return r&&(a.code=H.UTF8ToString(r,-1)),n.tryCatch.setError(a),n.clearLastError()}catch(e){return n.tryCatch.setError(e),n.setLastError(10)}},node_api_create_syntax_error:function(e,r,t,n){if(!e)return 1;var o=d.envStore.get(e);if(o.checkGCAccess(),!t)return o.setLastError(1);if(!n)return o.setLastError(1);var s=d.handleStore.get(t).value;if("string"!=typeof s)return o.setLastError(3);var i=new SyntaxError(s);if(r){var u=d.handleStore.get(r).value;if("string"!=typeof u)return o.setLastError(3);i.code=u}var c=d.addToCurrentScope(i).id;return new DataView(a.buffer).setInt32(n,c,!0),o.clearLastError()},node_api_throw_syntax_error:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);if(n.checkGCAccess(),!n.tryCatch.isEmpty())return n.setLastError(10);if(!n.canCallIntoJs())return n.setLastError(2147483647===n.moduleApiVersion?23:10);n.clearLastError();try{if(!t)return n.setLastError(1);var a=new SyntaxError(H.UTF8ToString(t,-1));return r&&(a.code=H.UTF8ToString(r,-1)),n.tryCatch.setError(a),n.clearLastError()}catch(e){return n.tryCatch.setError(e),n.setLastError(10)}}});var ve=Object.freeze({__proto__:null,napi_call_function:function(e,r,t,n,o,s){var i,u=0;if(!e)return 1;var c=d.envStore.get(e);if(c.checkGCAccess(),!c.tryCatch.isEmpty())return c.setLastError(10);if(!c.canCallIntoJs())return c.setLastError(2147483647===c.moduleApiVersion?23:10);c.clearLastError();try{if(!r)return c.setLastError(1);if((n>>>=0)>0&&!o)return c.setLastError(1);var f=d.handleStore.get(r).value;if(!t)return c.setLastError(1);var l=d.handleStore.get(t).value;if("function"!=typeof l)return c.setLastError(1);for(var p=[],v=new DataView(a.buffer);u<n;u++){var g=v.getInt32(o+4*u,!0);p.push(d.handleStore.get(g).value)}var y=l.apply(f,p);return s&&(i=c.ensureHandleId(y),v.setInt32(s,i,!0)),c.clearLastError()}catch(e){return c.tryCatch.setError(e),c.setLastError(10)}},napi_create_function:function(e,r,t,n,o,s){var i;if(!e)return 1;var u=d.envStore.get(e);if(u.checkGCAccess(),!u.tryCatch.isEmpty())return u.setLastError(10);if(!u.canCallIntoJs())return u.setLastError(2147483647===u.moduleApiVersion?23:10);u.clearLastError();try{if(!s)return u.setLastError(1);if(!n)return u.setLastError(1);var c=K(u,r,t,n,o);if(0!==c.status)return u.setLastError(c.status);var f=c.f;return i=d.addToCurrentScope(f).id,new DataView(a.buffer).setInt32(s,i,!0),u.getReturnStatus()}catch(e){return u.tryCatch.setError(e),u.setLastError(10)}},napi_get_cb_info:function(e,r,t,n,o,s){if(!e)return 1;var i=d.envStore.get(e);if(!r)return i.setLastError(1);var u=d.cbinfoStack.get(r),c=new DataView(a.buffer);if(n){if(!t)return i.setLastError(1);for(var f=c.getUint32(t,!0),l=u.args.length,p=f<l?f:l,v=0;v<p;v++){var g=i.ensureHandleId(u.args[v]);c.setInt32(n+4*v,g,!0)}if(v<f)for(;v<f;v++)c.setInt32(n+4*v,1,!0)}if(t&&c.setUint32(t,u.args.length,!0),o){var y=i.ensureHandleId(u.thiz);c.setInt32(o,y,!0)}return s&&c.setInt32(s,u.data,!0),i.clearLastError()},napi_get_new_target:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);if(n.checkGCAccess(),!r)return n.setLastError(1);if(!t)return n.setLastError(1);var o=d.cbinfoStack.get(r).getNewTarget(n);return new DataView(a.buffer).setInt32(t,o,!0),n.clearLastError()},napi_new_instance:function(e,r,t,n,o){var s,i;if(!e)return 1;var u=d.envStore.get(e);if(u.checkGCAccess(),!u.tryCatch.isEmpty())return u.setLastError(10);if(!u.canCallIntoJs())return u.setLastError(2147483647===u.moduleApiVersion?23:10);u.clearLastError();try{if(!r)return u.setLastError(1);if((t>>>=0)>0&&!n)return u.setLastError(1);if(!o)return u.setLastError(1);var c=d.handleStore.get(r).value;if("function"!=typeof c)return u.setLastError(1);var f=void 0,l=new DataView(a.buffer);if(d.feature.supportReflect){var p=Array(t);for(s=0;s<t;s++){var v=l.getInt32(n+4*s,!0);p[s]=d.handleStore.get(v).value}f=Reflect.construct(c,p,c)}else{var g=Array(t+1);for(g[0]=void 0,s=0;s<t;s++){v=l.getInt32(n+4*s,!0);g[s+1]=d.handleStore.get(v).value}f=new(c.bind.apply(c,g))}return o&&(i=u.ensureHandleId(f),l.setInt32(o,i,!0)),u.getReturnStatus()}catch(e){return u.tryCatch.setError(e),u.setLastError(10)}}});var ge=Object.freeze({__proto__:null,_emnapi_env_ref:function(e){d.envStore.get(e).ref()},_emnapi_env_unref:function(e){d.envStore.get(e).unref()},napi_add_env_cleanup_hook:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);return r?(d.addCleanupHook(n,r,t),0):n.setLastError(1)},napi_close_escapable_handle_scope:function(e,r){if(!e)return 1;var t=d.envStore.get(e);return t.checkGCAccess(),r?0===t.openHandleScopes?13:(d.closeScope(t),t.clearLastError()):t.setLastError(1)},napi_close_handle_scope:function(e,r){if(!e)return 1;var t=d.envStore.get(e);return t.checkGCAccess(),r?0===t.openHandleScopes?13:(d.closeScope(t),t.clearLastError()):t.setLastError(1)},napi_create_reference:function(e,r,t,n){if(!e)return 1;var o=d.envStore.get(e);if(o.checkGCAccess(),!r)return o.setLastError(1);if(!n)return o.setLastError(1);var s=d.handleStore.get(r);if(2147483647!==o.moduleApiVersion&&!(s.isObject()||s.isFunction()||s.isSymbol()))return o.setLastError(1);var i=d.createReference(o,s.id,t>>>0,1);return new DataView(a.buffer).setInt32(n,i.id,!0),o.clearLastError()},napi_delete_reference:function(e,r){if(!e)return 1;var t=d.envStore.get(e);return t.checkGCAccess(),r?(d.refStore.get(r).dispose(),t.clearLastError()):t.setLastError(1)},napi_escape_handle:function(e,r,t,n){if(!e)return 1;var o=d.envStore.get(e);if(o.checkGCAccess(),!r)return o.setLastError(1);if(!t)return o.setLastError(1);if(!n)return o.setLastError(1);var s=d.scopeStore.get(r);if(!s.escapeCalled()){var i=s.escape(t),u=i?i.id:0;return new DataView(a.buffer).setInt32(n,u,!0),o.clearLastError()}return o.setLastError(12)},napi_get_reference_value:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);if(n.checkGCAccess(),!r)return n.setLastError(1);if(!t)return n.setLastError(1);var o=d.refStore.get(r).get();return new DataView(a.buffer).setInt32(t,o,!0),n.clearLastError()},napi_open_escapable_handle_scope:function(e,r){if(!e)return 1;var t=d.envStore.get(e);if(t.checkGCAccess(),!r)return t.setLastError(1);var n=d.openScope(t);return new DataView(a.buffer).setInt32(r,n.id,!0),t.clearLastError()},napi_open_handle_scope:function(e,r){if(!e)return 1;var t=d.envStore.get(e);if(t.checkGCAccess(),!r)return t.setLastError(1);var n=d.openScope(t);return new DataView(a.buffer).setInt32(r,n.id,!0),t.clearLastError()},napi_reference_ref:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);if(n.checkGCAccess(),!r)return n.setLastError(1);var o=d.refStore.get(r).ref();return t&&new DataView(a.buffer).setUint32(t,o,!0),n.clearLastError()},napi_reference_unref:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);if(n.checkGCAccess(),!r)return n.setLastError(1);var o=d.refStore.get(r);if(0===o.refCount())return n.setLastError(9);var s=o.unref();return t&&new DataView(a.buffer).setUint32(t,s,!0),n.clearLastError()},napi_remove_env_cleanup_hook:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);return r?(d.removeCleanupHook(n,r,t),0):n.setLastError(1)}});var ye=Object.freeze({__proto__:null,_emnapi_get_filename:function(e,r,t){var n=d.envStore.get(e).filename;return r?H.stringToUTF8(n,r,t):H.lengthBytesUTF8(n)}});var he=Object.freeze({__proto__:null,napi_create_promise:function(e,r,t){var n,o;if(!e)return 1;var s=d.envStore.get(e);if(s.checkGCAccess(),!s.tryCatch.isEmpty())return s.setLastError(10);if(!s.canCallIntoJs())return s.setLastError(2147483647===s.moduleApiVersion?23:10);s.clearLastError();try{if(!r)return s.setLastError(1);if(!t)return s.setLastError(1);var i=new DataView(a.buffer),u=new Promise((function(e,t){var a=d.createDeferred({resolve:e,reject:t});n=a.id,i.setInt32(r,n,!0)}));return o=d.addToCurrentScope(u).id,i.setInt32(t,o,!0),s.getReturnStatus()}catch(e){return s.tryCatch.setError(e),s.setLastError(10)}},napi_is_promise:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);if(n.checkGCAccess(),!r)return n.setLastError(1);if(!t)return n.setLastError(1);var o=d.handleStore.get(r).isPromise()?1:0;return new DataView(a.buffer).setInt8(t,o,!0),n.clearLastError()},napi_reject_deferred:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);if(n.checkGCAccess(),!n.tryCatch.isEmpty())return n.setLastError(10);if(!n.canCallIntoJs())return n.setLastError(2147483647===n.moduleApiVersion?23:10);n.clearLastError();try{return r&&t?(d.deferredStore.get(r).reject(d.handleStore.get(t).value),n.getReturnStatus()):n.setLastError(1)}catch(e){return n.tryCatch.setError(e),n.setLastError(10)}},napi_resolve_deferred:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);if(n.checkGCAccess(),!n.tryCatch.isEmpty())return n.setLastError(10);if(!n.canCallIntoJs())return n.setLastError(2147483647===n.moduleApiVersion?23:10);n.clearLastError();try{return r&&t?(d.deferredStore.get(r).resolve(d.handleStore.get(t).value),n.getReturnStatus()):n.setLastError(1)}catch(e){return n.tryCatch.setError(e),n.setLastError(10)}}});function Ee(e,r,t,n,o,s){var i;if(!e)return 1;var u=d.envStore.get(e);if(u.checkGCAccess(),!u.tryCatch.isEmpty())return u.setLastError(10);if(!u.canCallIntoJs())return u.setLastError(2147483647===u.moduleApiVersion?23:10);u.clearLastError();try{if(!s)return u.setLastError(1);if(!r)return u.setLastError(1);var c=d.handleStore.get(r);if(null==c.value)throw new TypeError("Cannot convert undefined or null to object");var f=void 0;try{f=c.isObject()||c.isFunction()?c.value:Object(c.value)}catch(e){return u.setLastError(2)}if(0!==t&&1!==t)return u.setLastError(1);if(0!==o&&1!==o)return u.setLastError(1);var l=[],p=void 0,v=void 0,g=void 0,y=!0,h=/^(0|[1-9][0-9]*)$/;do{for(p=Object.getOwnPropertyNames(f),v=Object.getOwnPropertySymbols(f),g=0;g<p.length;g++)l.push({name:h.test(p[g])?Number(p[g]):p[g],desc:Object.getOwnPropertyDescriptor(f,p[g]),own:y});for(g=0;g<v.length;g++)l.push({name:v[g],desc:Object.getOwnPropertyDescriptor(f,v[g]),own:y});if(1===t)break;f=Object.getPrototypeOf(f),y=!1}while(f);var E=[],_=function(e,r,t,n){if(-1===e.indexOf(r))if(0===n)e.push(r);else if(1===n){var a="number"==typeof r?String(r):r;"string"==typeof a&&8&t||e.push(a)}};for(g=0;g<l.length;g++){var w=l[g],L=w.name,m=w.desc;if(0===n)_(E,L,n,o);else{if(8&n&&"string"==typeof L)continue;if(16&n&&"symbol"==typeof L)continue;var b=!0;switch(7&n){case 1:b=Boolean(m.writable);break;case 2:b=Boolean(m.enumerable);break;case 3:b=Boolean(m.writable&&m.enumerable);break;case 4:b=Boolean(m.configurable);break;case 5:b=Boolean(m.configurable&&m.writable);break;case 6:b=Boolean(m.configurable&&m.enumerable);break;case 7:b=Boolean(m.configurable&&m.enumerable&&m.writable)}b&&_(E,L,n,o)}}return i=d.addToCurrentScope(E).id,new DataView(a.buffer).setInt32(s,i,!0),u.getReturnStatus()}catch(e){return u.tryCatch.setError(e),u.setLastError(10)}}var _e=Object.freeze({__proto__:null,napi_define_properties:function(e,r,t,n){var o,s;if(!e)return 1;var i=d.envStore.get(e);if(i.checkGCAccess(),!i.tryCatch.isEmpty())return i.setLastError(10);if(!i.canCallIntoJs())return i.setLastError(2147483647===i.moduleApiVersion?23:10);i.clearLastError();try{if((t>>>=0)>0&&!n)return i.setLastError(1);if(!r)return i.setLastError(1);var u=d.handleStore.get(r),c=u.value;if(!u.isObject()&&!u.isFunction())return i.setLastError(2);for(var f=void 0,l=new DataView(a.buffer),p=0;p<t;p++){o=n+32*p;var v=l.getInt32(o,!0),g=l.getInt32(o+4,!0),y=l.getInt32(o+8,!0),h=l.getInt32(o+12,!0),E=l.getInt32(o+16,!0),_=l.getInt32(o+20,!0);s=l.getInt32(o+24,!0);var w=l.getInt32(o+28,!0);if(v)f=H.UTF8ToString(v,-1);else{if(!g)return i.setLastError(4);if("string"!=typeof(f=d.handleStore.get(g).value)&&"symbol"!=typeof f)return i.setLastError(4)}ee(i,c,f,y,h,E,_,s,w)}return i.getReturnStatus()}catch(e){return i.tryCatch.setError(e),i.setLastError(10)}},napi_delete_element:function(e,r,t,n){var o;if(!e)return 1;var s=d.envStore.get(e);if(s.checkGCAccess(),!s.tryCatch.isEmpty())return s.setLastError(10);if(!s.canCallIntoJs())return s.setLastError(2147483647===s.moduleApiVersion?23:10);s.clearLastError();try{if(!r)return s.setLastError(1);var i=d.handleStore.get(r);if(!i.isObject()&&!i.isFunction())return s.setLastError(2);if(d.feature.supportReflect)o=Reflect.deleteProperty(i.value,t>>>0);else try{o=delete i.value[t>>>0]}catch(e){o=!1}if(n)new DataView(a.buffer).setInt8(n,o?1:0,!0);return s.getReturnStatus()}catch(e){return s.tryCatch.setError(e),s.setLastError(10)}},napi_delete_property:function(e,r,t,n){var o;if(!e)return 1;var s=d.envStore.get(e);if(s.checkGCAccess(),!s.tryCatch.isEmpty())return s.setLastError(10);if(!s.canCallIntoJs())return s.setLastError(2147483647===s.moduleApiVersion?23:10);s.clearLastError();try{if(!t)return s.setLastError(1);if(!r)return s.setLastError(1);var i=d.handleStore.get(r);if(!i.isObject()&&!i.isFunction())return s.setLastError(2);var u=d.handleStore.get(t).value;if(d.feature.supportReflect)o=Reflect.deleteProperty(i.value,u);else try{o=delete i.value[u]}catch(e){o=!1}if(n)new DataView(a.buffer).setInt8(n,o?1:0,!0);return s.getReturnStatus()}catch(e){return s.tryCatch.setError(e),s.setLastError(10)}},napi_get_all_property_names:Ee,napi_get_element:function(e,r,t,n){var o;if(!e)return 1;var s=d.envStore.get(e);if(s.checkGCAccess(),!s.tryCatch.isEmpty())return s.setLastError(10);if(!s.canCallIntoJs())return s.setLastError(2147483647===s.moduleApiVersion?23:10);s.clearLastError();try{if(!n)return s.setLastError(1);if(!r)return s.setLastError(1);var i=d.handleStore.get(r);if(null==i.value)throw new TypeError("Cannot convert undefined or null to object");var u=void 0;try{u=i.isObject()||i.isFunction()?i.value:Object(i.value)}catch(e){return s.setLastError(2)}return o=s.ensureHandleId(u[t>>>0]),new DataView(a.buffer).setInt32(n,o,!0),s.getReturnStatus()}catch(e){return s.tryCatch.setError(e),s.setLastError(10)}},napi_get_named_property:function(e,r,t,n){var o;if(!e)return 1;var s=d.envStore.get(e);if(s.checkGCAccess(),!s.tryCatch.isEmpty())return s.setLastError(10);if(!s.canCallIntoJs())return s.setLastError(2147483647===s.moduleApiVersion?23:10);s.clearLastError();try{if(!n)return s.setLastError(1);if(!r)return s.setLastError(1);if(!t)return s.setLastError(1);var i=d.handleStore.get(r);if(null==i.value)throw new TypeError("Cannot convert undefined or null to object");var u=void 0;try{u=i.isObject()||i.isFunction()?i.value:Object(i.value)}catch(e){return s.setLastError(2)}return o=s.ensureHandleId(u[H.UTF8ToString(t,-1)]),new DataView(a.buffer).setInt32(n,o,!0),s.getReturnStatus()}catch(e){return s.tryCatch.setError(e),s.setLastError(10)}},napi_get_property:function(e,r,t,n){var o;if(!e)return 1;var s=d.envStore.get(e);if(s.checkGCAccess(),!s.tryCatch.isEmpty())return s.setLastError(10);if(!s.canCallIntoJs())return s.setLastError(2147483647===s.moduleApiVersion?23:10);s.clearLastError();try{if(!t)return s.setLastError(1);if(!n)return s.setLastError(1);if(!r)return s.setLastError(1);var i=d.handleStore.get(r);if(null==i.value)throw new TypeError("Cannot convert undefined or null to object");var u=void 0;try{u=i.isObject()||i.isFunction()?i.value:Object(i.value)}catch(e){return s.setLastError(2)}return o=s.ensureHandleId(u[d.handleStore.get(t).value]),new DataView(a.buffer).setInt32(n,o,!0),s.getReturnStatus()}catch(e){return s.tryCatch.setError(e),s.setLastError(10)}},napi_get_property_names:function(e,r,t){return Ee(e,r,0,18,1,t)},napi_has_element:function(e,r,t,n){var o;if(!e)return 1;var s=d.envStore.get(e);if(s.checkGCAccess(),!s.tryCatch.isEmpty())return s.setLastError(10);if(!s.canCallIntoJs())return s.setLastError(2147483647===s.moduleApiVersion?23:10);s.clearLastError();try{if(!n)return s.setLastError(1);if(!r)return s.setLastError(1);var i=d.handleStore.get(r);if(null==i.value)throw new TypeError("Cannot convert undefined or null to object");var u=void 0;try{u=i.isObject()||i.isFunction()?i.value:Object(i.value)}catch(e){return s.setLastError(2)}return o=t>>>0 in u?1:0,new DataView(a.buffer).setInt8(n,o,!0),s.getReturnStatus()}catch(e){return s.tryCatch.setError(e),s.setLastError(10)}},napi_has_named_property:function(e,r,t,n){var o;if(!e)return 1;var s=d.envStore.get(e);if(s.checkGCAccess(),!s.tryCatch.isEmpty())return s.setLastError(10);if(!s.canCallIntoJs())return s.setLastError(2147483647===s.moduleApiVersion?23:10);s.clearLastError();try{if(!n)return s.setLastError(1);if(!r)return s.setLastError(1);if(!t)return s.setLastError(1);var i=d.handleStore.get(r);if(null==i.value)throw new TypeError("Cannot convert undefined or null to object");var u=void 0;try{u=i.isObject()||i.isFunction()?i.value:Object(i.value)}catch(e){return s.setLastError(2)}return o=H.UTF8ToString(t,-1)in u,new DataView(a.buffer).setInt8(n,o?1:0,!0),s.getReturnStatus()}catch(e){return s.tryCatch.setError(e),s.setLastError(10)}},napi_has_own_property:function(e,r,t,n){var o;if(!e)return 1;var s=d.envStore.get(e);if(s.checkGCAccess(),!s.tryCatch.isEmpty())return s.setLastError(10);if(!s.canCallIntoJs())return s.setLastError(2147483647===s.moduleApiVersion?23:10);s.clearLastError();try{if(!t)return s.setLastError(1);if(!n)return s.setLastError(1);if(!r)return s.setLastError(1);var i=d.handleStore.get(r);if(null==i.value)throw new TypeError("Cannot convert undefined or null to object");var u=void 0;try{u=i.isObject()||i.isFunction()?i.value:Object(i.value)}catch(e){return s.setLastError(2)}var c=d.handleStore.get(t).value;return"string"!=typeof c&&"symbol"!=typeof c?s.setLastError(4):(o=Object.prototype.hasOwnProperty.call(u,d.handleStore.get(t).value),new DataView(a.buffer).setInt8(n,o?1:0,!0),s.getReturnStatus())}catch(e){return s.tryCatch.setError(e),s.setLastError(10)}},napi_has_property:function(e,r,t,n){var o;if(!e)return 1;var s=d.envStore.get(e);if(s.checkGCAccess(),!s.tryCatch.isEmpty())return s.setLastError(10);if(!s.canCallIntoJs())return s.setLastError(2147483647===s.moduleApiVersion?23:10);s.clearLastError();try{if(!t)return s.setLastError(1);if(!n)return s.setLastError(1);if(!r)return s.setLastError(1);var i=d.handleStore.get(r);if(null==i.value)throw new TypeError("Cannot convert undefined or null to object");var u=void 0;try{u=i.isObject()||i.isFunction()?i.value:Object(i.value)}catch(e){return s.setLastError(2)}return o=d.handleStore.get(t).value in u?1:0,new DataView(a.buffer).setInt8(n,o,!0),s.getReturnStatus()}catch(e){return s.tryCatch.setError(e),s.setLastError(10)}},napi_object_freeze:function(e,r){if(!e)return 1;var t=d.envStore.get(e);if(t.checkGCAccess(),!t.tryCatch.isEmpty())return t.setLastError(10);if(!t.canCallIntoJs())return t.setLastError(2147483647===t.moduleApiVersion?23:10);t.clearLastError();try{if(!r)return t.setLastError(1);var n=d.handleStore.get(r),a=n.value;return n.isObject()||n.isFunction()?(Object.freeze(a),t.getReturnStatus()):t.setLastError(2)}catch(e){return t.tryCatch.setError(e),t.setLastError(10)}},napi_object_seal:function(e,r){if(!e)return 1;var t=d.envStore.get(e);if(t.checkGCAccess(),!t.tryCatch.isEmpty())return t.setLastError(10);if(!t.canCallIntoJs())return t.setLastError(2147483647===t.moduleApiVersion?23:10);t.clearLastError();try{if(!r)return t.setLastError(1);var n=d.handleStore.get(r),a=n.value;return n.isObject()||n.isFunction()?(Object.seal(a),t.getReturnStatus()):t.setLastError(2)}catch(e){return t.tryCatch.setError(e),t.setLastError(10)}},napi_set_element:function(e,r,t,n){if(!e)return 1;var a=d.envStore.get(e);if(a.checkGCAccess(),!a.tryCatch.isEmpty())return a.setLastError(10);if(!a.canCallIntoJs())return a.setLastError(2147483647===a.moduleApiVersion?23:10);a.clearLastError();try{if(!n)return a.setLastError(1);if(!r)return a.setLastError(1);var o=d.handleStore.get(r);return o.isObject()||o.isFunction()?(o.value[t>>>0]=d.handleStore.get(n).value,a.getReturnStatus()):a.setLastError(2)}catch(e){return a.tryCatch.setError(e),a.setLastError(10)}},napi_set_named_property:function(e,r,t,n){if(!e)return 1;var a=d.envStore.get(e);if(a.checkGCAccess(),!a.tryCatch.isEmpty())return a.setLastError(10);if(!a.canCallIntoJs())return a.setLastError(2147483647===a.moduleApiVersion?23:10);a.clearLastError();try{if(!n)return a.setLastError(1);if(!r)return a.setLastError(1);var o=d.handleStore.get(r);return o.isObject()||o.isFunction()?t?(d.handleStore.get(r).value[H.UTF8ToString(t,-1)]=d.handleStore.get(n).value,a.getReturnStatus()):a.setLastError(1):a.setLastError(2)}catch(e){return a.tryCatch.setError(e),a.setLastError(10)}},napi_set_property:function(e,r,t,n){if(!e)return 1;var a=d.envStore.get(e);if(a.checkGCAccess(),!a.tryCatch.isEmpty())return a.setLastError(10);if(!a.canCallIntoJs())return a.setLastError(2147483647===a.moduleApiVersion?23:10);a.clearLastError();try{if(!t)return a.setLastError(1);if(!n)return a.setLastError(1);if(!r)return a.setLastError(1);var o=d.handleStore.get(r);return o.isObject()||o.isFunction()?(o.value[d.handleStore.get(t).value]=d.handleStore.get(n).value,a.getReturnStatus()):a.setLastError(2)}catch(e){return a.tryCatch.setError(e),a.setLastError(10)}}});var we=Object.freeze({__proto__:null,napi_run_script:function(e,r,t){var n,o;if(!e)return 1;var s=d.envStore.get(e);if(s.checkGCAccess(),!s.tryCatch.isEmpty())return s.setLastError(10);if(!s.canCallIntoJs())return s.setLastError(2147483647===s.moduleApiVersion?23:10);s.clearLastError();try{if(!r)return s.setLastError(1);if(!t)return s.setLastError(1);var i=d.handleStore.get(r);if(!i.isString())return s.setLastError(3);var u=d.handleStore.get(5).value.eval(i.value);o=s.ensureHandleId(u),new DataView(a.buffer).setInt32(t,o,!0),n=s.getReturnStatus()}catch(e){return s.tryCatch.setError(e),s.setLastError(10)}return n}});var Le=Object.freeze({__proto__:null,napi_coerce_to_bool:function(e,r,t){var n;if(!e)return 1;var o=d.envStore.get(e);if(o.checkGCAccess(),!o.tryCatch.isEmpty())return o.setLastError(10);if(!o.canCallIntoJs())return o.setLastError(2147483647===o.moduleApiVersion?23:10);o.clearLastError();try{return r&&t?(n=d.handleStore.get(r).value?4:3,new DataView(a.buffer).setInt32(t,n,!0),o.getReturnStatus()):o.setLastError(1)}catch(e){return o.tryCatch.setError(e),o.setLastError(10)}},napi_coerce_to_number:function(e,r,t){var n;if(!e)return 1;var o=d.envStore.get(e);if(o.checkGCAccess(),!o.tryCatch.isEmpty())return o.setLastError(10);if(!o.canCallIntoJs())return o.setLastError(2147483647===o.moduleApiVersion?23:10);o.clearLastError();try{if(!r)return o.setLastError(1);if(!t)return o.setLastError(1);var s=d.handleStore.get(r);if(s.isBigInt())throw new TypeError("Cannot convert a BigInt value to a number");return n=d.addToCurrentScope(Number(s.value)).id,new DataView(a.buffer).setInt32(t,n,!0),o.getReturnStatus()}catch(e){return o.tryCatch.setError(e),o.setLastError(10)}},napi_coerce_to_object:function(e,r,t){var n;if(!e)return 1;var o=d.envStore.get(e);if(o.checkGCAccess(),!o.tryCatch.isEmpty())return o.setLastError(10);if(!o.canCallIntoJs())return o.setLastError(2147483647===o.moduleApiVersion?23:10);o.clearLastError();try{if(!r)return o.setLastError(1);if(!t)return o.setLastError(1);var s=d.handleStore.get(r);if(null==s.value)throw new TypeError("Cannot convert undefined or null to object");return n=o.ensureHandleId(Object(s.value)),new DataView(a.buffer).setInt32(t,n,!0),o.getReturnStatus()}catch(e){return o.tryCatch.setError(e),o.setLastError(10)}},napi_coerce_to_string:function(e,r,t){var n;if(!e)return 1;var o=d.envStore.get(e);if(o.checkGCAccess(),!o.tryCatch.isEmpty())return o.setLastError(10);if(!o.canCallIntoJs())return o.setLastError(2147483647===o.moduleApiVersion?23:10);o.clearLastError();try{if(!r)return o.setLastError(1);if(!t)return o.setLastError(1);var s=d.handleStore.get(r);if(s.isSymbol())throw new TypeError("Cannot convert a Symbol value to a string");return n=d.addToCurrentScope(String(s.value)).id,new DataView(a.buffer).setInt32(t,n,!0),o.getReturnStatus()}catch(e){return o.tryCatch.setError(e),o.setLastError(10)}},napi_detach_arraybuffer:function(e,r){if(!e)return 1;var t=d.envStore.get(e);if(t.checkGCAccess(),!r)return t.setLastError(1);var n=d.handleStore.get(r).value;if(!(n instanceof ArrayBuffer))return"function"==typeof SharedArrayBuffer&&n instanceof SharedArrayBuffer?t.setLastError(20):t.setLastError(19);try{(new(0,d.feature.MessageChannel)).port1.postMessage(n,[n])}catch(e){return t.setLastError(9)}return t.clearLastError()},napi_instanceof:function(e,r,t,n){var o;if(!e)return 1;var s=d.envStore.get(e);if(s.checkGCAccess(),!s.tryCatch.isEmpty())return s.setLastError(10);if(!s.canCallIntoJs())return s.setLastError(2147483647===s.moduleApiVersion?23:10);s.clearLastError();try{if(!r)return s.setLastError(1);if(!n)return s.setLastError(1);if(!t)return s.setLastError(1);var i=new DataView(a.buffer);i.setInt8(n,0,!0);var u=d.handleStore.get(t);return u.isFunction()?(o=d.handleStore.get(r).value instanceof u.value?1:0,i.setInt8(n,o,!0),s.getReturnStatus()):s.setLastError(5)}catch(e){return s.tryCatch.setError(e),s.setLastError(10)}},napi_is_array:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);if(n.checkGCAccess(),!r)return n.setLastError(1);if(!t)return n.setLastError(1);var o=d.handleStore.get(r).isArray()?1:0;return new DataView(a.buffer).setInt8(t,o,!0),n.clearLastError()},napi_is_arraybuffer:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);if(n.checkGCAccess(),!r)return n.setLastError(1);if(!t)return n.setLastError(1);var o=d.handleStore.get(r).isArrayBuffer()?1:0;return new DataView(a.buffer).setInt8(t,o,!0),n.clearLastError()},napi_is_buffer:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);if(n.checkGCAccess(),!r)return n.setLastError(1);if(!t)return n.setLastError(1);var o=d.handleStore.get(r).isBuffer()?1:0;return new DataView(a.buffer).setInt8(t,o,!0),n.clearLastError()},napi_is_dataview:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);if(n.checkGCAccess(),!r)return n.setLastError(1);if(!t)return n.setLastError(1);var o=d.handleStore.get(r).isDataView()?1:0;return new DataView(a.buffer).setInt8(t,o,!0),n.clearLastError()},napi_is_date:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);if(n.checkGCAccess(),!r)return n.setLastError(1);if(!t)return n.setLastError(1);var o=d.handleStore.get(r).isDate()?1:0;return new DataView(a.buffer).setInt8(t,o,!0),n.clearLastError()},napi_is_detached_arraybuffer:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);if(n.checkGCAccess(),!n.tryCatch.isEmpty())return n.setLastError(10);if(!n.canCallIntoJs())return n.setLastError(2147483647===n.moduleApiVersion?23:10);n.clearLastError();try{if(!r)return n.setLastError(1);if(!t)return n.setLastError(1);var o=d.handleStore.get(r),s=new DataView(a.buffer);if(o.isArrayBuffer()&&0===o.value.byteLength)try{new Uint8Array(o.value)}catch(e){return s.setInt8(t,1,!0),n.getReturnStatus()}return s.setInt8(t,0,!0),n.getReturnStatus()}catch(e){return n.tryCatch.setError(e),n.setLastError(10)}},napi_is_error:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);if(n.checkGCAccess(),!r)return n.setLastError(1);if(!t)return n.setLastError(1);var o=d.handleStore.get(r).value instanceof Error?1:0;return new DataView(a.buffer).setInt8(t,o,!0),n.clearLastError()},napi_is_typedarray:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);if(n.checkGCAccess(),!r)return n.setLastError(1);if(!t)return n.setLastError(1);var o=d.handleStore.get(r).isTypedArray()?1:0;return new DataView(a.buffer).setInt8(t,o,!0),n.clearLastError()},napi_strict_equals:function(e,r,t,n){var o;if(!e)return 1;var s=d.envStore.get(e);if(s.checkGCAccess(),!s.tryCatch.isEmpty())return s.setLastError(10);if(!s.canCallIntoJs())return s.setLastError(2147483647===s.moduleApiVersion?23:10);s.clearLastError();try{return r&&(t&&n)?(o=d.handleStore.get(r).value===d.handleStore.get(t).value?1:0,new DataView(a.buffer).setInt8(n,o,!0),s.getReturnStatus()):s.setLastError(1)}catch(e){return s.tryCatch.setError(e),s.setLastError(10)}},napi_typeof:function(e,r,t){if(!e)return 1;var n=d.envStore.get(e);if(n.checkGCAccess(),!r)return n.setLastError(1);if(!t)return n.setLastError(1);var o,s=d.handleStore.get(r);if(s.isNumber())o=3;else if(s.isBigInt())o=9;else if(s.isString())o=4;else if(s.isFunction())o=7;else if(s.isExternal())o=8;else if(s.isObject())o=6;else if(s.isBoolean())o=2;else if(s.isUndefined())o=0;else if(s.isSymbol())o=5;else{if(!s.isNull())return n.setLastError(1);o=1}return new DataView(a.buffer).setInt32(t,o,!0),n.clearLastError()}});var me=Object.freeze({__proto__:null,napi_get_version:function(e,r){if(!e)return 1;var t=d.envStore.get(e);return r?(new DataView(a.buffer).setUint32(r,9,!0),t.clearLastError()):t.setLastError(1)}});function be(e){for(var r=Object.keys(e),t=0;t<r.length;++t){var n=r[t];0!==n.indexOf("$")&&(0===n.indexOf("emnapi_")?y.imports.emnapi[n]=e[n]:0===n.indexOf("_emnapi_")||"napi_set_last_error"===n||"napi_clear_last_error"===n?y.imports.env[n]=e[n]:y.imports.napi[n]=e[n])}}return R.init(),q.init(),H.init(),z.init(),y.emnapi.syncMemory=se,y.emnapi.getMemoryAddress=ie,be(x),be(U),be(P),be(T),be($),be(Z),be(fe),be(le),be(ae),be(de),be(ue),be(pe),be(ve),be(ge),be(ye),be(O),be(he),be(_e),be(we),be(Le),be(me),y.imports.napi.napi_create_threadsafe_function=function(e,r,t,n,o,u,c,f,l,p,v){if(!e)return 1;var g=d.envStore.get(e);if(g.checkGCAccess(),!n)return g.setLastError(1);if(o>>>=0,0===(u>>>=0))return g.setLastError(1);if(!v)return g.setLastError(1);var y,h=0;if(r){if("function"!=typeof d.handleStore.get(r).value)return g.setLastError(1);h=d.createReference(g,r,1,1).id}else if(!p)return g.setLastError(1);if(t){if(null==(y=d.handleStore.get(t).value))return g.setLastError(2);y=Object(y)}else y={};var E=g.ensureHandleId(y),_=d.handleStore.get(n).value;if("symbol"==typeof _)return g.setLastError(3);_=String(_);var w=g.ensureHandleId(_),L=z.offset.end,m=s(L);if(!m)return g.setLastError(9);new Uint8Array(a.buffer).subarray(m,m+L).fill(0);var b=d.createReference(g,E,1,1),S=b.id,C=new DataView(a.buffer);return C.setInt32(m,S,!0),z.initQueue(m)?(G(E,w,-1,m+z.offset.async_id),C.setUint32(m+z.offset.thread_count,u,!0),C.setInt32(m+z.offset.context,l,!0),C.setUint32(m+z.offset.max_queue_size,o,!0),C.setInt32(m+z.offset.ref,h,!0),C.setInt32(m+z.offset.env,e,!0),C.setInt32(m+z.offset.finalize_data,c,!0),C.setInt32(m+z.offset.finalize_cb,f,!0),C.setInt32(m+z.offset.call_js_cb,p,!0),d.addCleanupHook(g,z.cleanup,m),g.ref(),d.increaseWaitingRequestCounter(),C.setInt32(m+z.offset.async_ref,1,!0),C.setInt32(v,m,!0),g.clearLastError()):(i(m),b.dispose(),g.setLastError(9))},y.imports.napi.napi_get_threadsafe_function_context=function(e,r){if(!e||!r)return l(),1;var t=z.getContext(e);return new DataView(a.buffer).setInt32(r,t,!0),0},y.imports.napi.napi_call_threadsafe_function=function(e,r,t){return e?z.push(e,r,t):(l(),1)},y.imports.napi.napi_acquire_threadsafe_function=function(e){return e?z.getMutex(e).execute((function(){return z.getIsClosing(e)?16:(z.addThreadCount(e),0)})):(l(),1)},y.imports.napi.napi_release_threadsafe_function=function(e,r){if(!e)return l(),1;var t=z.getMutex(e),n=z.getCond(e);return t.execute((function(){if(0===z.getThreadCount(e))return 1;if((z.subThreadCount(e),0===z.getThreadCount(e)||1===r)&&!z.getIsClosing(e)){var t=1===r?1:0;z.setIsClosing(e,t),t&&z.getMaxQueueSize(e)>0&&n.signal(),z.send(e)}return 0}))},y.imports.napi.napi_unref_threadsafe_function=function(e,r){if(!r)return l(),1;var t=r+z.offset.async_ref>>2,n=new Int32Array(a.buffer);return Atomics.load(n,t)&&(Atomics.store(n,t,0),d.decreaseWaitingRequestCounter()),0},y.imports.napi.napi_ref_threadsafe_function=function(e,r){if(!r)return l(),1;var t=r+z.offset.async_ref>>2,n=new Int32Array(a.buffer);return Atomics.load(n,t)||(Atomics.store(n,t,1),d.increaseWaitingRequestCounter()),0},y}();return t}function a(e,r,t,a){const o=(a=null==a?{}:a).getMemory,s=a.getTable,i=a.beforeInit;if(null!=o&&"function"!=typeof o)throw new TypeError("options.getMemory is not a function");if(null!=s&&"function"!=typeof s)throw new TypeError("options.getTable is not a function");if(null!=i&&"function"!=typeof i)throw new TypeError("options.beforeInit is not a function");let u;const c="object"==typeof r&&null!==r;if(c){if(r.loaded)throw new Error("napiModule has already loaded");u=r}else u=n(a);const f=a.wasi;let l={env:u.imports.env,napi:u.imports.napi,emnapi:u.imports.emnapi,wasi:{"thread-spawn":function(e,r){return u.spawnThread(e,r)}}};f&&Object.assign(l,"function"==typeof f.getImportObject?f.getImportObject():{wasi_snapshot_preview1:f.wasiImport});const d=a.overwriteImports;if("function"==typeof d){const e=d(l);"object"==typeof e&&null!==e&&(l=e)}return e(t,l,((e,r)=>{if(e)throw e;const t=r.instance;let n=t;const a=t.exports,d="memory"in a,p="memory"in l.env,v=o?o(a):d?a.memory:p?l.env.memory:void 0;if(!v)throw new Error("memory is neither exported nor imported");const g=s?s(a):a.__indirect_function_table;if(f&&!d){const e=Object.create(null);Object.assign(e,a,{memory:v}),n={exports:e}}const y=r.module;if(f){if(u.childThread){const e=function(e){const r=["apply","construct","defineProperty","deleteProperty","get","getOwnPropertyDescriptor","getPrototypeOf","has","isExtensible","ownKeys","preventExtensions","set","setPrototypeOf"],t={};for(let n=0;n<r.length;n++){const a=r[n];t[a]=function(){const r=Array.prototype.slice.call(arguments,1);return r.unshift(e),Reflect[a].apply(Reflect,r)}}return t},r=e(a),t=()=>{};r.get=function(e,r,n){return"memory"===r?v:"_initialize"===r?t:Reflect.get(a,r,n)};const o=new Proxy(Object.create(null),r);n=new Proxy(n,{get:(e,r,t)=>"exports"===r?o:Reflect.get(e,r,t)})}f.initialize(n)}i&&i({instance:t,module:y}),u.init({instance:n,module:y,memory:v,table:g});const h={instance:t,module:y};return c||(h.napiModule=u),h}))}function o(e,r,n){return t(e,r).then((e=>n(null,e)),(e=>n(e)))}function s(t,n,a){let o;try{o=function(t,n){if(!t)throw new TypeError("Invalid wasm source");let a;if(r(n),n=null!=n?n:{},t instanceof ArrayBuffer||ArrayBuffer.isView(t))a=new e.Module(t);else{if(!(t instanceof WebAssembly.Module))throw new TypeError("Invalid wasm source");a=t}return{instance:new e.Instance(a,n),module:a}}(t,n)}catch(e){return a(e)}return a(null,o)}function i(e,r,t){if("object"!=typeof e||null===e)throw new TypeError("Invalid napiModule");return a(o,e,r,t)}function u(e,r,t){if("object"!=typeof e||null===e)throw new TypeError("Invalid napiModule");return a(s,e,r,t)}function c(e,r){return a(o,void 0,e,r)}function f(e,r){return a(s,void 0,e,r)}class l{constructor(e){const r=e.onLoad;if("function"!=typeof r)throw new TypeError("options.onLoad is not a function");this.onLoad=r,this.instance=void 0,this.napiModule=void 0,this.messagesBeforeLoad=[]}handle(e){if(e&&e.data&&e.data.__emnapi__){const r=e.data.__emnapi__.type,t=e.data.__emnapi__.payload,n=this.onLoad;if("load"===r){if(void 0!==this.instance)return;const e=n(t),r=e&&e.then;"function"==typeof r?r.call(e,(e=>{p.call(this,e)}),(e=>{throw e})):p.call(this,e)}else"start"===r?d.call(this,e,(()=>{this.napiModule.startThread(t.tid,t.arg)})):"async-worker-init"===r?d.call(this,e,(()=>{this.napiModule.initWorker(t.arg)})):"async-work-execute"===r&&d.call(this,e,(()=>{this.napiModule.executeAsyncWork(t.work)}))}}}function d(e,r){void 0!==this.instance?r.call(this,e):this.messagesBeforeLoad.push(e.data)}function p(e){if(null==e)throw new TypeError("onLoad should return an object");const r=e.instance,t=e.napiModule;if(!r)throw new TypeError('onLoad should return an object which includes "instance"');if(!t)throw new TypeError('onLoad should return an object which includes "napiModule"');if(!t.childThread)throw new Error("napiModule should be created with `childThread: true`");this.instance=r,this.napiModule=t;(0,t.postMessage)({__emnapi__:{type:"loaded",payload:{}}});const n=this.messagesBeforeLoad;this.messagesBeforeLoad=[];for(let e=0;e<n.length;e++){const r=n[e];this.handle({data:r})}}const v="0.45.0";export{l as MessageHandler,n as createNapiModule,c as instantiateNapiModule,f as instantiateNapiModuleSync,i as loadNapiModule,u as loadNapiModuleSync,v as version};
